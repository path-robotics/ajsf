!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/core"),require("lodash/cloneDeep"),require("lodash/isEqual"),require("rxjs"),require("ajv"),require("ajv/lib/refs/json-schema-draft-06.json"),require("rxjs/operators"),require("lodash/filter"),require("lodash/map"),require("lodash/uniqueId")):"function"==typeof define&&define.amd?define("@ajsf/core",["exports","@angular/common","@angular/forms","@angular/core","lodash/cloneDeep","lodash/isEqual","rxjs","ajv","ajv/lib/refs/json-schema-draft-06.json","rxjs/operators","lodash/filter","lodash/map","lodash/uniqueId"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ajsf=e.ajsf||{},e.ajsf.core={}),e.ng.common,e.ng.forms,e.ng.core,e["lodash-es"],e["lodash-es"],e.rxjs,e.ajv,e.jsonDraft6,e.rxjs.operators,e["lodash-es"],e["lodash-es"],e["lodash-es"])}(this,(function(e,t,r,n,o,i,a,s,l,u,d,c,p){"use strict";function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=m(o),h=m(i),y=m(s),v=m(l),g=m(d),b=m(c),x=m(p),I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};Object.create;function F(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function C(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e}var w;Object.create;function O(e,t){var r,n;void 0===t&&(t={});var o=t.draft||null,i=t.changed||!1;if("object"!=typeof e)return e;if("function"==typeof e.map)return C(e.map((function(e){return O(e,{changed:i,draft:o})})));var a=Object.assign({},e),s=["array","boolean","integer","null","number","object","string"];if("string"==typeof a.$schema&&/http\:\/\/json\-schema\.org\/draft\-0\d\/schema\#/.test(a.$schema)&&(o=a.$schema[30]),a.contentEncoding&&(a.media={binaryEncoding:a.contentEncoding},delete a.contentEncoding,i=!0),"object"==typeof a.extends&&(a.allOf="function"==typeof a.extends.map?a.extends.map((function(e){return O(e,{changed:i,draft:o})})):[O(a.extends,{changed:i,draft:o})],delete a.extends,i=!0),a.disallow&&("string"==typeof a.disallow?a.not={type:a.disallow}:"function"==typeof a.disallow.map&&(a.not={anyOf:a.disallow.map((function(e){return"object"==typeof e?e:{type:e}}))}),delete a.disallow,i=!0),"object"==typeof a.dependencies&&Object.keys(a.dependencies).some((function(e){return"string"==typeof a.dependencies[e]}))&&(a.dependencies=Object.assign({},a.dependencies),Object.keys(a.dependencies).filter((function(e){return"string"==typeof a.dependencies[e]})).forEach((function(e){return a.dependencies[e]=[a.dependencies[e]]})),i=!0),"number"==typeof a.maxDecimal&&(a.multipleOf=1/Math.pow(10,a.maxDecimal),delete a.divisibleBy,i=!0,o&&2!==o||(o=1)),"number"==typeof a.divisibleBy&&(a.multipleOf=a.divisibleBy,delete a.divisibleBy,i=!0),"number"==typeof a.minimum&&!1===a.minimumCanEqual?(a.exclusiveMinimum=a.minimum,delete a.minimum,i=!0,o||(o=2)):"boolean"==typeof a.minimumCanEqual&&(delete a.minimumCanEqual,i=!0,o||(o=2)),"number"==typeof a.minimum&&!0===a.exclusiveMinimum?(a.exclusiveMinimum=a.minimum,delete a.minimum,i=!0):"boolean"==typeof a.exclusiveMinimum&&(delete a.exclusiveMinimum,i=!0),"number"==typeof a.maximum&&!1===a.maximumCanEqual?(a.exclusiveMaximum=a.maximum,delete a.maximum,i=!0,o||(o=2)):"boolean"==typeof a.maximumCanEqual&&(delete a.maximumCanEqual,i=!0,o||(o=2)),"number"==typeof a.maximum&&!0===a.exclusiveMaximum?(a.exclusiveMaximum=a.maximum,delete a.maximum,i=!0):"boolean"==typeof a.exclusiveMaximum&&(delete a.exclusiveMaximum,i=!0),"object"==typeof a.properties){var l=Object.assign({},a.properties),u=Array.isArray(a.required)?new Set(a.required):new Set;if((1===o||2===o||Object.keys(l).some((function(e){return!0===l[e].optional})))&&(Object.keys(l).filter((function(e){return!0!==l[e].optional})).forEach((function(e){return u.add(e)})),i=!0,o||(o=2)),Object.keys(l).some((function(e){return!0===l[e].required}))&&(Object.keys(l).filter((function(e){return!0===l[e].required})).forEach((function(e){return u.add(e)})),i=!0),u.size&&(a.required=Array.from(u)),Object.keys(l).some((function(e){return l[e].requires}))){var d="object"==typeof a.dependencies?Object.assign({},a.dependencies):{};Object.keys(l).filter((function(e){return l[e].requires})).forEach((function(e){return d[e]="string"==typeof l[e].requires?[l[e].requires]:l[e].requires})),a.dependencies=d,i=!0,o||(o=2)}a.properties=l}if("boolean"==typeof a.optional&&(delete a.optional,i=!0,o||(o=2)),a.requires&&delete a.requires,"boolean"==typeof a.required&&delete a.required,"string"!=typeof a.id||a.$id||("#"===a.id.slice(-1)&&(a.id=a.id.slice(0,-1)),a.$id=a.id+"-CONVERTED-TO-DRAFT-06#",delete a.id,i=!0),!a.type||("function"==typeof a.type.every?a.type.every((function(e){return s.includes(e)})):s.includes(a.type))||(i=!0),"string"==typeof a.$schema&&/http\:\/\/json\-schema\.org\/draft\-0[1-4]\/schema\#/.test(a.$schema))a.$schema="http://json-schema.org/draft-06/schema#",i=!0;else if(i&&"string"==typeof a.$schema){var c="Converted to draft 6 from "+a.$schema;"string"==typeof a.description&&a.description.length?a.description+="\n"+c:a.description=c,delete a.$schema}if(a.type&&("function"==typeof a.type.every?!a.type.every((function(e){return s.includes(e)})):!s.includes(a.type)))if(1===a.type.length&&(a.type=a.type[0]),"string"==typeof a.type)"any"===a.type?a.type=s:delete a.type;else if("object"==typeof a.type){if("function"==typeof a.type.every)if(a.type.every((function(e){return"string"==typeof e})))a.type=a.type.some((function(e){return"any"===e}))?a.type=s:a.type.filter((function(e){return s.includes(e)}));else if(a.type.length>1){var p=["additionalItems","items","maxItems","minItems","uniqueItems","contains"],m=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"],h=["maxProperties","minProperties","required","additionalProperties","properties","patternProperties","dependencies","propertyNames"],y=["maxLength","minLength","pattern","format"],v={array:C(m,h,y),integer:C(p,h,y),number:C(p,h,y),object:C(p,m,y),string:C(p,m,h),all:C(p,m,h,y)},g=[],b=function(e){var t="string"==typeof e?{type:e}:Object.assign({},e);Object.keys(a).filter((function(e){return!t.hasOwnProperty(e)&&!C(v[t.type]||v.all,["type","default"]).includes(e)})).forEach((function(e){return t[e]=a[e]})),g.push(t)};try{for(var x=F(a.type),I=x.next();!I.done;I=x.next()){b(I.value)}}catch(e){r={error:e}}finally{try{I&&!I.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}a=a.hasOwnProperty("default")?{anyOf:g,default:a.default}:{anyOf:g}}else{var j=a.type;delete a.type,Object.assign(a,j)}}else delete a.type;return Object.keys(a).filter((function(e){return"object"==typeof a[e]})).forEach((function(e){if(["definitions","dependencies","properties","patternProperties"].includes(e)&&"function"!=typeof a[e].map){var t={};Object.keys(a[e]).forEach((function(r){return t[r]=O(a[e][r],{changed:i,draft:o})})),a[e]=t}else["items","additionalItems","additionalProperties","allOf","anyOf","oneOf","not"].includes(e)?a[e]=O(a[e],{changed:i,draft:o}):a[e]=f.default(a[e])})),a}function D(e,t,r){return void 0===r&&(r=!1),t.map((function(t){return t(e,r)}))}function P(e,t,r){return void 0===r&&(r=!1),t.map((function(t){return t(e,r)}))}function M(){for(var e,t,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a={};try{for(var s=F(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(q(u))try{for(var d=(r=void 0,F(Object.keys(u))),c=d.next();!c.done;c=d.next()){var p=c.value,m=u[p],f=a[p];a[p]=N(f)?"not"===p&&T(f,"strict")&&T(m,"strict")?Q(f,m):"object"===_(f)&&"object"===_(m)?M(f,m):m:m}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return a}function k(e){var t=M.apply(void 0,C(e));return V(t)?null:t}function N(e){return null!=e}function S(e){return null!=e&&""!==e}function V(e){return R(e)?!e.length:q(e)?!Object.keys(e).length:null==e||""===e}function L(e){return"string"==typeof e}function E(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0)}function A(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0&&e%1==0)}function T(e,t){return void 0===t&&(t=null),"strict"===t?!0===e||!1===e:!0===t?!0===e||1===e||"true"===e||"1"===e:!1===t?!1===e||0===e||"false"===e||"0"===e:!0===e||1===e||"true"===e||"1"===e||!1===e||0===e||"false"===e||"0"===e}function q(e){return null!==e&&"object"==typeof e}function R(e){return Array.isArray(e)}function $(e){return!!e&&"[object Date]"===Object.prototype.toString.call(e)}function z(e){return!!e&&"[object Map]"===Object.prototype.toString.call(e)}function W(e){return!!e&&"[object Set]"===Object.prototype.toString.call(e)}function _(e,t){return void 0===t&&(t=!1),N(e)?R(e)?"array":q(e)?"object":T(e,"strict")?"boolean":A(e,t)?"integer":E(e,t)?"number":L(e)||!t&&$(e)?"string":null:"null"}function J(e,t){switch(t){case"string":return L(e)||$(e);case"number":return E(e);case"integer":return A(e);case"boolean":return T(e);case"null":return!S(e);default:return console.error('isType error: "'+t+'" is not a recognized type.'),null}}function B(e){return L(e)||E(e)||T(e,"strict")||null===e}function H(e,t,r){if(void 0===r&&(r=!0),!N(e))return null;if(L(t)&&(t=[t]),r&&Y("integer",t)){if(A(e,"strict"))return e;if(A(e))return parseInt(e,10)}if(Y("number",t)||!r&&Y("integer",t)){if(E(e,"strict"))return e;if(E(e))return parseFloat(e)}if(Y("string",t)){if(L(e))return e;if($(e))return e.toISOString().slice(0,10);if(E(e))return e.toString()}if($(e)&&(Y("integer",t)||Y("number",t)))return e.getTime();if(Y("boolean",t)){if(T(e,!0))return!0;if(T(e,!1))return!1}return null}function G(e,t){if(R(t)||(t=[t]),t.includes("null")&&!S(e))return null;if(t.includes("boolean")&&!T(e,"strict"))return e;if(t.includes("integer")&&null!==(r=H(e,"integer")))return+r;if(t.includes("number")&&null!==(r=H(e,"number")))return+r;if((L(e)||E(e,"strict"))&&t.includes("string"))return H(e,"string");if(t.includes("boolean")&&T(e))return H(e,"boolean");if(t.includes("string")){if(null===e)return"";var r;if(null!==(r=H(e,"string")))return r}if(t.includes("number")||t.includes("integer")){if(!0===e)return 1;if(!1===e||null===e||""===e)return 0}if(t.includes("number")&&(r=parseFloat(e)))return r;if(t.includes("integer")&&(r=parseInt(e,10)))return r;return t.includes("boolean")?!!e:!t.includes("number")&&!t.includes("integer")||t.includes("null")?void 0:0}function U(e){return!!e&&"function"==typeof e.then}function Z(e){return!!e&&"function"==typeof e.subscribe}function K(e){var t=U(e)?a.from(e):e;return Z(t)?t:(console.error("toObservable error: Expected validator to return Promise or Observable."),new a.Observable)}function Y(e,t,r){return void 0===r&&(r=!1),!(!N(e)||!R(t))&&(R(e)?e[r?"every":"some"]((function(e){return t.includes(e)})):t.includes(e))}function Q(e,t){return!!e&&!t||!e&&!!t}function X(e,t){return void 0===t&&(t=!1),"object"!=typeof e||null===e?e:z(e)?new Map(e):W(e)?new Set(e):R(e)?C(e):q(e)?Object.assign({},e):(t&&console.error("copy error: Object to copy must be a JavaScript object or value."),e)}function ee(e,t,r,n,o){var i,a;if(void 0===r&&(r=!1),void 0===n&&(n=e),void 0===o&&(o=!1),!V(e)){if((q(e)||R(e))&&"function"==typeof t)try{for(var s=F(Object.keys(e)),l=s.next();!l.done;l=s.next()){var u=l.value,d=e[u];"bottom-up"===r&&(q(d)||R(d))&&ee(d,t,r,n),t(d,u,e,n),"top-down"===r&&(q(d)||R(d))&&ee(d,t,r,n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o&&("function"!=typeof t&&(console.error("forEach error: Iterator must be a function."),console.error("function",t)),q(e)||R(e)||(console.error("forEach error: Input object must be an object or array."),console.error("object",e)))}}function te(e,t,r){var n,o;if(void 0===r&&(r=!1),S(e)){if((q(e)||R(e))&&"function"!=typeof e){var i=R(e)?[]:{};try{for(var a=F(Object.keys(e)),s=a.next();!s.done;s=a.next()){var l=s.value;i[l]=t(e[l],l,e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}r&&("function"!=typeof t&&(console.error("forEachCopy error: Iterator must be a function."),console.error("function",t)),q(e)||R(e)||(console.error("forEachCopy error: Input object must be an object or array."),console.error("object",e)))}}function re(e,t){if(!(e&&["number","string","symbol"].includes(typeof t)&&(q(e)||R(e)||z(e)||W(e))))return!1;if(z(e)||W(e))return e.has(t);if("number"==typeof t){if(R(e))return e[t];t+=""}return e.hasOwnProperty(t)}function ne(e){return e===w.EQUALS}function oe(e){return e===w.NOT_EQUALS}function ie(e,t,r,n,o){var i,a;if(void 0===r&&(r=[]),void 0===n&&(n=function(e){return e}),void 0===o&&(o=function(e){return e}),!q(t))return e;q(e)||(e={});try{for(var s=F(Object.keys(t)),l=s.next();!l.done;l=s.next()){var u=l.value;!Y(u,r)&&N(t[u])&&(e[n(u)]=o(t[u]))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return e}function ae(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=[];try{for(var i=F(r),a=i.next();!a.done;a=i.next()){var s=a.value;o.includes(s)||o.push(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o}function se(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=null,i=function(e){if(L(e)&&(e=[e]),!(o=null===o?C(e):o.filter((function(t){return e.includes(t)}))).length)return{value:[]}};try{for(var a=F(r),s=a.next();!s.done;s=a.next()){var l=s.value,u=i(l);if("object"==typeof u)return u.value}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o}function le(e){return e&&ue(e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," "))}function ue(e,t){if(!L(e))return e;var r=["a","an","and","as","at","but","by","en","for","if","in","nor","of","on","or","per","the","to","v","v.","vs","vs.","via"];L(t)&&(t=t.split("|")),R(t)&&(r=r.concat(t));var n=r.map((function(e){return e.toLowerCase()})),o=e===e.toUpperCase()||e===e.toLowerCase(),i="";return(e=e.trim()).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(t,a){if(o||-1===t.slice(1).search(/[A-Z]|\../)){var s=void 0,l=r[n.indexOf(t.toLowerCase())];return s=l?l===l.toLowerCase()&&(0===a||a+t.length===e.length||":"===i||-1!==e[a-1].search(/[^\s-]/)||"-"!==e[a-1]&&"-"===e[a+t.length])?l[0].toUpperCase()+l.slice(1):l:o?-1!==t.slice(1).search(/\../)?t.toLowerCase():t[0].toUpperCase()+t.slice(1).toLowerCase():t[0].toUpperCase()+t.slice(1),i=t.slice(-1),s}return t}))}!function(e){e[e.EQUALS=0]="EQUALS",e[e.NOT_EQUALS=1]="NOT_EQUALS",e[e.NOT_AN_EXPRESSION=2]="NOT_AN_EXPRESSION"}(w||(w={}));var de=function(){this.widgets={},this.stylesheets=[],this.scripts=[]};de.decorators=[{type:n.Injectable}];var ce=function(){function e(){}return e.get=function(t,r,n,o,i,a){var s,l;if(void 0===n&&(n=0),void 0===o&&(o=null),void 0===i&&(i=!1),void 0===a&&(a=!1),null===t)return!i&&void 0;var u=this.parse(r,a);if("object"==typeof t&&null!==u){var d=t;if(n>=u.length||o<=-u.length)return t;n<=-u.length&&(n=0),(!N(o)||o>=u.length)&&(o=u.length),u=u.slice(n,o);try{for(var c=F(u),p=c.next();!p.done;p=c.next()){var m=p.value;if("-"===m&&R(d)&&d.length&&(m=d.length-1),z(d)&&d.has(m))d=d.get(m);else if("object"==typeof d&&null!==d&&re(d,m))d=d[m];else{var f=e.evaluateExpression(d,m);if(!f.passed)return this.logErrors(a,m,r,t),!i&&void 0;d=f.key?d[f.key]:d}}}catch(e){s={error:e}}finally{try{p&&!p.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return!!i||d}return a&&null===u&&console.error("get error: Invalid JSON Pointer: "+r),a&&"object"!=typeof t&&(console.error("get error: Invalid object:"),console.error(t)),!i&&void 0},e.logErrors=function(e,t,r,n){e&&(console.error('get error: "'+t+'" key not found in object.'),console.error(r),console.error(n))},e.evaluateExpression=function(e,t){var r={passed:!1,key:t},n=this.parseKeysAndExpression(t,e);if(!n)return r;var o=this.doOwnCheckResult(e,n);if(o)return o;var i,a="'"===(i=n.keyAndValue[1]).charAt(0)&&"'"===i.charAt(i.length-1)?i.replace("'","").replace("'",""):i,s=this.performExpressionOnValue(n,a,e);return s||r},e.performExpressionOnValue=function(e,t,r){var n=r[e.keyAndValue[0]];return this.doComparisonByExpressionType(e.expressionType,n,t)?{passed:!0,key:e.keyAndValue[0]}:null},e.doComparisonByExpressionType=function(e,t,r){return ne(e)?t===r:!!oe(e)&&t!==r},e.doOwnCheckResult=function(e,t){var r=null;return re(e,t.keyAndValue[0])||(ne(t.expressionType)&&(r={passed:!1,key:null}),oe(t.expressionType)&&(r={passed:!0,key:null})),r},e.parseKeysAndExpression=function(e,t){if(this.keyOrSubObjEmpty(e,t))return null;var r,n=-1!==(r=e.toString()).indexOf("==")?w.EQUALS:-1!==r.toString().indexOf("!=")?w.NOT_EQUALS:w.NOT_AN_EXPRESSION;if(function(e){return e===w.NOT_AN_EXPRESSION}(n))return null;var o=function(e,t){return ne(e)?t.split("==",2):oe(e)?t.split("!=",2):null}(n,e);return o&&o[0]&&o[1]?{expressionType:n,keyAndValue:o}:null},e.keyOrSubObjEmpty=function(e,t){return!e||!t},e.getCopy=function(e,t,r,n,o,i){void 0===r&&(r=0),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===i&&(i=!1);var a=this.get(e,t,r,n,o,i);return this.forEachDeepCopy(a)},e.getFirst=function(e,t,r){var n,o,i,a;if(void 0===t&&(t=null),void 0===r&&(r=!1),!V(e)){if(R(e)){try{for(var s=F(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(!V(u)){if(!(R(u)&&u.length>=2))return void console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]");if(V(u[0])||V(u[1]))continue;if(p=r?this.getCopy(u[0],u[1]):this.get(u[0],u[1]))return p}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return t}if(z(e)){try{for(var d=F(e),c=d.next();!c.done;c=d.next()){var p,m=j(c.value,2),f=m[0],h=m[1];if(null!==f&&this.isJsonPointer(h))if(p=r?this.getCopy(f,h):this.get(f,h))return p}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return t}return console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]"),t}},e.getFirstCopy=function(e,t){return void 0===t&&(t=null),this.getFirst(e,t,!0)},e.set=function(e,t,r,n){void 0===n&&(n=!1);var o=this.parse(t);if(null!==o&&o.length){for(var i=e,a=0;a<o.length-1;++a){var s=o[a];"-"===s&&R(i)&&(s=i.length),z(i)&&i.has(s)?i=i.get(s):(re(i,s)||(i[s]=o[a+1].match(/^(\d+|-)$/)?[]:{}),i=i[s])}var l=o[o.length-1];return R(i)&&"-"===l?i.push(r):n&&R(i)&&!isNaN(+l)?i.splice(l,0,r):z(i)?i.set(l,r):i[l]=r,e}return console.error("set error: Invalid JSON Pointer: "+t),e},e.setCopy=function(e,t,r,n){void 0===n&&(n=!1);var o=this.parse(t);if(null!==o){for(var i=X(e),a=i,s=0;s<o.length-1;++s){var l=o[s];"-"===l&&R(a)&&(l=a.length),z(a)&&a.has(l)?(a.set(l,X(a.get(l))),a=a.get(l)):(re(a,l)||(a[l]=o[s+1].match(/^(\d+|-)$/)?[]:{}),a[l]=X(a[l]),a=a[l])}var u=o[o.length-1];return R(a)&&"-"===u?a.push(r):n&&R(a)&&!isNaN(+u)?a.splice(u,0,r):z(a)?a.set(u,r):a[u]=r,i}return console.error("setCopy error: Invalid JSON Pointer: "+t),e},e.insert=function(e,t,r){return this.set(e,t,r,!0)},e.insertCopy=function(e,t,r){return this.setCopy(e,t,r,!0)},e.remove=function(e,t){var r=this.parse(t);if(null!==r&&r.length){var n=r.pop(),o=this.get(e,r);return R(o)?("-"===n&&(n=o.length-1),o.splice(n,1)):q(o)&&delete o[n],e}return console.error("remove error: Invalid JSON Pointer: "+t),e},e.has=function(e,t){return this.get(e,t,0,null,!0)},e.dict=function(e){var t={};return this.forEachDeep(e,(function(e,r){"object"!=typeof e&&(t[r]=e)})),t},e.forEachDeep=function(e,t,r,n,o){var i,a;if(void 0===t&&(t=function(e){return e}),void 0===r&&(r=!1),void 0===n&&(n=""),void 0===o&&(o=e),"function"==typeof t){if(r||t(e,n,o),q(e)||R(e))try{for(var s=F(Object.keys(e)),l=s.next();!l.done;l=s.next()){var u=l.value,d=n+"/"+this.escape(u);this.forEachDeep(e[u],t,r,d,o)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}r&&t(e,n,o)}else console.error("forEachDeep error: Iterator is not a function:",t)},e.forEachDeepCopy=function(e,t,r,n,o){var i,a;if(void 0===t&&(t=function(e){return e}),void 0===r&&(r=!1),void 0===n&&(n=""),void 0===o&&(o=e),"function"!=typeof t)return console.error("forEachDeepCopy error: Iterator is not a function:",t),null;if(q(e)||R(e)){var s=R(e)?C(e):Object.assign({},e);r||(s=t(s,n,o));try{for(var l=F(Object.keys(s)),u=l.next();!u.done;u=l.next()){var d=u.value,c=n+"/"+this.escape(d);s[d]=this.forEachDeepCopy(s[d],t,r,c,o)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return r&&(s=t(s,n,o)),s}return t(e,n,o)},e.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},e.unescape=function(e){return e.toString().replace(/~1/g,"/").replace(/~0/g,"~")},e.parse=function(e,t){return void 0===t&&(t=!1),this.isJsonPointer(e)?R(e)?e:"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),""===e||"/"===e?[]:e.slice(1).split("/").map(this.unescape)):void 0:(t&&console.error("parse error: Invalid JSON Pointer: "+e),null)},e.compile=function(e,t,r){var n=this;return void 0===t&&(t=""),void 0===r&&(r=!1),"#"===e?"":this.isJsonPointer(e)?R(e)?0===e.length?"":"/"+e.map((function(e){return""===e?t:n.escape(e)})).join("/"):"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),e):void 0:(r&&console.error("compile error: Invalid JSON Pointer: "+e),null)},e.toKey=function(e,t){void 0===t&&(t=!1);var r=this.parse(e,t);return null===r?null:r.length?r[r.length-1]:""},e.isJsonPointer=function(e){if(R(e))return e.every((function(e){return"string"==typeof e}));if(L(e)){if(""===e||"#"===e)return!0;if("/"===e[0]||"#/"===e.slice(0,2))return!/(~[^01]|~$)/g.test(e)}return!1},e.isSubPointer=function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),this.isJsonPointer(e)&&this.isJsonPointer(t))return(e=this.compile(e,"",n))===(t=this.compile(t,"",n))?r:e+"/"===t.slice(0,e.length+1);if(n){var o="";this.isJsonPointer(e)||(o+=" 1: "+e),this.isJsonPointer(t)||(o+=" 2: "+t),console.error("isSubPointer error: Invalid JSON Pointer "+o)}},e.toIndexedPointer=function(e,t,r){var n,o;if(void 0===r&&(r=null),this.isJsonPointer(e)&&R(t)){var i=this.compile(e);if(z(r)){var a=0;return i.replace(/\/\-(?=\/|$)/g,(function(e,n){return r.has(i.slice(0,n))?"/"+t[a++]:e}))}try{for(var s=F(t),l=s.next();!l.done;l=s.next()){var u=l.value;i=i.replace("/-","/"+u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i}this.isJsonPointer(e)||console.error("toIndexedPointer error: Invalid JSON Pointer: "+e),R(t)||console.error("toIndexedPointer error: Invalid indexArray: "+t)},e.toGenericPointer=function(e,t){if(void 0===t&&(t=new Map),this.isJsonPointer(e)&&z(t)){for(var r=this.parse(e),n=1;n<r.length;n++){var o=this.compile(r.slice(0,n));t.has(o)&&t.get(o)<=+r[n]&&(r[n]="-")}return this.compile(r)}this.isJsonPointer(e)||console.error("toGenericPointer error: invalid JSON Pointer: "+e),z(t)||console.error("toGenericPointer error: invalid arrayMap: "+t)},e.toControlPointer=function(e,t,r){var n,o;void 0===r&&(r=!1);var i=this.parse(e),a=[],s=t;if(null!==i){try{for(var l=F(i),u=l.next();!u.done;u=l.next()){var d=u.value;if(re(s,"controls")&&(a.push("controls"),s=s.controls),R(s)&&"-"===d)a.push((s.length-1).toString()),s=s[s.length-1];else if(re(s,d))a.push(d),s=s[d];else{if(r)return console.error('toControlPointer error: Unable to find "'+d+'" item in FormGroup.'),console.error(e),void console.error(t);a.push(d),s={controls:{}}}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return this.compile(a)}console.error("toControlPointer error: Invalid JSON Pointer: "+e)},e.toSchemaPointer=function(e,t){if(this.isJsonPointer(e)&&"object"==typeof t){var r=this.parse(e);if(!r.length)return"";var n=r.shift();if("object"===t.type||t.properties||t.additionalProperties){if((t.properties||{})[n])return"/properties/"+this.escape(n)+this.toSchemaPointer(r,t.properties[n]);if(t.additionalProperties)return"/additionalProperties"+this.toSchemaPointer(r,t.additionalProperties)}if(("array"===t.type||t.items)&&(E(n)||"-"===n||""===n)){var o="-"===n||""===n?0:+n;if(R(t.items)){if(o<t.items.length)return"/items/"+o+this.toSchemaPointer(r,t.items[o]);if(t.additionalItems)return"/additionalItems"+this.toSchemaPointer(r,t.additionalItems)}else{if(q(t.items))return"/items"+this.toSchemaPointer(r,t.items);if(q(t.additionalItems))return"/additionalItems"+this.toSchemaPointer(r,t.additionalItems)}}return console.error("toSchemaPointer error: Data pointer "+e+" not compatible with schema "+t),null}return this.isJsonPointer(e)||console.error("toSchemaPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toSchemaPointer error: Invalid JSON Schema: "+t),null},e.toDataPointer=function(e,t,r){if(void 0===r&&(r=!1),this.isJsonPointer(e)&&"object"==typeof t&&this.has(t,e)){var n=this.parse(e);if(!n.length)return"";var o=n.shift();if("properties"===o||"items"===o&&R(t.items)){var i,a=n.shift();return null===(i=this.toDataPointer(n,t[o][a]))?null:"/"+a+i}if("additionalItems"===o||"items"===o&&q(t.items))return null===(i=this.toDataPointer(n,t[o]))?null:"/-"+i;if(["allOf","anyOf","oneOf"].includes(o)){a=n.shift();return this.toDataPointer(n,t[o][a])}return"not"===o?this.toDataPointer(n,t[o]):(["contains","definitions","dependencies","additionalItems","additionalProperties","patternProperties","propertyNames"].includes(o)&&r&&console.error("toDataPointer error: Ambiguous location"),"")}return r&&(this.isJsonPointer(e)||console.error("toDataPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toDataPointer error: Invalid JSON Schema: "+t),"object"!=typeof t&&console.error("toDataPointer error: Pointer "+e+" invalid for Schema: "+t)),null},e.parseObjectPath=function(e){if(R(e))return e;if(this.isJsonPointer(e))return this.parse(e);if("string"==typeof e){for(var t=0,r=[];t<e.length;){var n=e.indexOf(".",t),o=e.indexOf("[",t);if(-1===n&&-1===o)r.push(e.slice(t)),t=e.length;else if(-1!==n&&(n<o||-1===o))r.push(e.slice(t,n)),t=n+1;else{o>t&&(r.push(e.slice(t,o)),t=o);var i=e.charAt(o+1);if('"'===i||"'"===i){for(var a=e.indexOf(i+"]",o);-1!==a&&"\\"===e.charAt(a-1);)a=e.indexOf(i+"]",a+2);-1===a&&(a=e.length),r.push(e.slice(t+2,a).replace(new RegExp("\\"+i,"g"),i)),t=a+2}else{-1===(a=e.indexOf("]",o))&&(a=e.length),r.push(e.slice(t+1,a)),t=a+1}"."===e.charAt(t)&&t++}}return r}console.error("parseObjectPath error: Input object path must be a string.")},e}();ce.decorators=[{type:n.Injectable}];var pe={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d(?::[0-5]\d)?(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,color:/^\s*(#(?:[\da-f]{3}){1,2}|rgb\((?:\d{1,3},\s*){2}\d{1,3}\)|rgba\((?:\d{1,3},\s*){3}\d*\.?\d+\)|hsl\(\d{1,3}(?:,\s*\d{1,3}%){2}\)|hsla\(\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\))\s*$/gi,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,regex:function(e){if(/[^\\]\\Z/.test(e))return!1;try{return!0}catch(e){return!1}}},me=function(){function e(){}return e.required=function(t){switch(void 0===t&&(t=!0),t){case!0:return function(e,t){return void 0===t&&(t=!1),t||S(e.value)?null:{required:!0}};case!1:return e.nullValidator;default:return S(t.value)?null:{required:!0}}},e.type=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(R(t)?t.some((function(e){return J(n,e)})):J(n,t),r)?null:{type:{requiredType:t,currentValue:n}}}:e.nullValidator},e.enum=function(t){return R(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value,o=function(e,t){return e===t||E(e)&&+t==+e||T(e,"strict")&&H(t,"boolean")===e||null===e&&!S(t)||h.default(e,t)};return Q(R(n)?n.every((function(e){return t.some((function(t){return o(t,e)}))})):t.some((function(e){return o(e,n)})),r)?null:{enum:{allowedValues:t,currentValue:n}}}:e.nullValidator},e.const=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n,o,i=e.value;return Q((n=t)===(o=i)||E(n)&&+o==+n||T(n,"strict")&&H(o,"boolean")===n||null===n&&!S(o),r)?null:{const:{requiredValue:t,currentValue:i}}}:e.nullValidator},e.minLength=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=L(e.value)?e.value.length:0;return Q(n>=t,r)?null:{minLength:{minimumLength:t,currentLength:n}}}:e.nullValidator},e.maxLength=function(t){return S(t)?function(e,r){void 0===r&&(r=!1);var n=L(e.value)?e.value.length:0;return Q(n<=t,r)?null:{maxLength:{maximumLength:t,currentLength:n}}}:e.nullValidator},e.pattern=function(t,r){return void 0===r&&(r=!1),S(t)?function(e,n){if(void 0===n&&(n=!1),V(e.value))return null;var o,i;"string"==typeof t?(i=r?"^"+t+"$":t,o=new RegExp(i)):(i=t.toString(),o=t);var a=e.value;return Q(!!L(a)&&o.test(a),n)?null:{pattern:{requiredPattern:i,currentValue:a}}}:e.nullValidator},e.format=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n,o=e.value;if(L(o)){var i=pe[t];"object"==typeof i?n=i.test(o):"function"==typeof i?n=i(o):(console.error('format validator error: "'+t+'" is not a recognized format.'),n=!0)}else n=["date","time","date-time"].includes(t)&&"[object Date]"===Object.prototype.toString.call(o);return Q(n,r)?null:{format:{requiredFormat:t,currentValue:o}}}:e.nullValidator},e.minimum=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(!E(n)||n>=t,r)?null:{minimum:{minimumValue:t,currentValue:n}}}:e.nullValidator},e.exclusiveMinimum=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(!E(n)||+n<t,r)?null:{exclusiveMinimum:{exclusiveMinimumValue:t,currentValue:n}}}:e.nullValidator},e.maximum=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(!E(n)||+n<=t,r)?null:{maximum:{maximumValue:t,currentValue:n}}}:e.nullValidator},e.exclusiveMaximum=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(!E(n)||+n<t,r)?null:{exclusiveMaximum:{exclusiveMaximumValue:t,currentValue:n}}}:e.nullValidator},e.multipleOf=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=e.value;return Q(E(n)&&n%t==0,r)?null:{multipleOf:{multipleOfValue:t,currentValue:n}}}:e.nullValidator},e.minProperties=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=Object.keys(e.value).length||0;return Q(n>=t,r)?null:{minProperties:{minimumProperties:t,currentProperties:n}}}:e.nullValidator},e.maxProperties=function(t){return S(t)?function(e,r){void 0===r&&(r=!1);var n=Object.keys(e.value).length||0;return Q(n<=t,r)?null:{maxProperties:{maximumProperties:t,currentProperties:n}}}:e.nullValidator},e.dependencies=function(t){return"object"!==_(t)||V(t)?e.nullValidator:function(r,n){if(void 0===n&&(n=!1),V(r.value))return null;var o=M(te(t,(function(o,i){var a,s,l;if(!S(r.value[i]))return null;var u,d={},c={};"array"===_(t[i])?u=t[i]:"object"===_(t[i])&&(u=t[i].required||[],c=t[i].properties||{});try{for(var p=F(u),m=p.next();!m.done;m=p.next()){var f=m.value;Q(!S(r.value[f]),n)&&(d[f]={required:!0})}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}return d=M(d,te(c,(function(t,n){var o,i=M(te(t,(function(o,i){var a=null;if("maximum"===o||"minimum"===o){var s=!!t["exclusiveM"+o.slice(1)];a=e[o](i,s)}else"function"==typeof e[o]&&(a=e[o](i));return N(a)?a(r.value[n]):null})));return V(i)?null:((o={})[n]=i,o)}))),V(d)?null:((l={})[i]=d,l)})));return V(o)?null:o}},e.minItems=function(t){return S(t)?function(e,r){if(void 0===r&&(r=!1),V(e.value))return null;var n=R(e.value)?e.value.length:0;return Q(n>=t,r)?null:{minItems:{minimumItems:t,currentItems:n}}}:e.nullValidator},e.maxItems=function(t){return S(t)?function(e,r){void 0===r&&(r=!1);var n=R(e.value)?e.value.length:0;return Q(n<=t,r)?null:{maxItems:{maximumItems:t,currentItems:n}}}:e.nullValidator},e.uniqueItems=function(t){return void 0===t&&(t=!0),t?function(e,t){if(void 0===t&&(t=!1),V(e.value))return null;for(var r=e.value.slice().sort(),n=[],o=1;o<r.length;o++)r[o-1]===r[o]&&n.includes(r[o])&&n.push(r[o]);return Q(!n.length,t)?null:{uniqueItems:{duplicateItems:n}}}:e.nullValidator},e.contains=function(t){return void 0===t&&(t=!0),t?function(e,r){if(void 0===r&&(r=!1),V(e.value)||!R(e.value))return null;var n=e.value;return Q(!0,r)?null:{contains:{requiredItem:t,currentItems:n}}}:e.nullValidator},e.nullValidator=function(e){return null},e.composeAnyOf=function(e){if(!e)return null;var t=e.filter(N);return 0===t.length?null:function(r,n){void 0===n&&(n=!1);var o=D(r,t,n).filter(N);return Q(e.length>o.length,n)?null:M.apply(void 0,C(o,[{anyOf:!n}]))}},e.composeOneOf=function(e){if(!e)return null;var t=e.filter(N);return 0===t.length?null:function(r,n){void 0===n&&(n=!1);var o=D(r,t);if(Q(1===e.length-o.filter(N).length,n))return null;var i=D(r,t,n);return M.apply(void 0,C(o,i,[{oneOf:!n}]))}},e.composeAllOf=function(e){if(!e)return null;var t=e.filter(N);return 0===t.length?null:function(e,r){void 0===r&&(r=!1);var n=k(D(e,t,r));return Q(null===n,r)?null:M(n,{allOf:!r})}},e.composeNot=function(e){return e?function(t,r){if(void 0===r&&(r=!1),V(t.value))return null;var n=e(t,!r);return Q(null===n,r)?null:M(n,{not:!r})}:null},e.compose=function(e){if(!e)return null;var t=e.filter(N);return 0===t.length?null:function(e,r){return void 0===r&&(r=!1),k(D(e,t,r))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(N);return 0===t.length?null:function(e){var r=P(e,t).map(K);return u.map.call(a.forkJoin(r),k)}},e.min=function(t){return S(t)?function(e){if(V(e.value)||V(t))return null;var r=parseFloat(e.value),n=e.value;return isNaN(r)||r>=t?null:{min:{min:t,actual:n}}}:e.nullValidator},e.max=function(t){return S(t)?function(e){if(V(e.value)||V(t))return null;var r=parseFloat(e.value),n=e.value;return isNaN(r)||r<=t?null:{max:{max:t,actual:n}}}:e.nullValidator},e.requiredTrue=function(t){return t?!0===t.value?null:{required:!0}:e.nullValidator},e.email=function(t){if(!t)return e.nullValidator;return/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/.test(t.value)?null:{email:!0}},e}();function fe(){for(var e,t,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if((o=o.filter((function(e){return!V(e)}))).some((function(e){return!q(e)})))return null;var a={};try{for(var s=F(o),l=s.next();!l.done;l=s.next()){var u=l.value,d=function(e){var t,r,n,i,s,l,d,c,p,m,f=a[e],y=u[e];if(!re(a,e)||h.default(f,y))a[e]=y;else switch(e){case"allOf":if(!R(f)||!R(y))return{value:{allOf:C(o)}};a.allOf=fe.apply(void 0,C(f,y));break;case"additionalItems":case"additionalProperties":case"contains":case"propertyNames":if(q(f)&&q(y))a[e]=fe(f,y);else{if("additionalProperties"!==e||!1!==f&&!1!==y)return{value:{allOf:C(o)}};a.combinedSchema=!1}break;case"anyOf":case"oneOf":case"enum":if(!R(f)||!R(y))return{value:{allOf:C(o)}};if(a[e]=f.filter((function(e){return y.findIndex((function(t){return h.default(e,t)}))>-1})),!a[e].length)return{value:{allOf:C(o)}};break;case"definitions":if(!q(f)||!q(y))return{value:{allOf:C(o)}};var v=Object.assign({},f);try{for(var g=(t=void 0,F(Object.keys(y))),b=g.next();!b.done;b=g.next()){if(re(v,A=b.value)&&!h.default(v[A],y[A]))return{value:{allOf:C(o)}};v[A]=y[A]}}catch(e){t={error:e}}finally{try{b&&!b.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}a.definitions=v;break;case"dependencies":if(!q(f)||!q(y))return{value:{allOf:C(o)}};v=Object.assign({},f);try{for(var x=(n=void 0,F(Object.keys(y))),I=x.next();!I.done;I=x.next()){if(!re(v,A=I.value)||h.default(v[A],y[A]))v[A]=y[A];else if(R(y[A])&&R(v[A]))v[A]=ae.apply(void 0,C(v[A],y[A]));else{if(!R(y[A])&&!q(y[A])||!R(v[A])&&!q(v[A]))return{value:{allOf:C(o)}};var j=R(a.required)?a.required:[],w=R(v[A])?{required:ae.apply(void 0,C(j,[v[A]]))}:v[A],O=R(y[A])?{required:ae.apply(void 0,C(j,[y[A]]))}:y[A];v[A]=fe(w,O)}}}catch(e){n={error:e}}finally{try{I&&!I.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}a.dependencies=v;break;case"items":if(R(f)&&R(y)){if(a.items=f.filter((function(e){return y.findIndex((function(t){return h.default(e,t)}))>-1})),!a.items.length)return{value:{allOf:C(o)}}}else if(q(f)&&q(y))a.items=fe(f,y);else if(R(f)&&q(y))a.items=f.map((function(e){return fe(e,y)}));else{if(!q(f)||!R(y))return{value:{allOf:C(o)}};a.items=y.map((function(e){return fe(e,f)}))}break;case"multipleOf":if(!E(f)||!E(y))return{value:{allOf:C(o)}};var D=function(e,t){return t?D(t,e%t):e};a.multipleOf=(p=f)*(m=y)/D(p,m);break;case"maximum":case"exclusiveMaximum":case"maxLength":case"maxItems":case"maxProperties":if(!E(f)||!E(y))return{value:{allOf:C(o)}};a[e]=Math.min(f,y);break;case"minimum":case"exclusiveMinimum":case"minLength":case"minItems":case"minProperties":if(!E(f)||!E(y))return{value:{allOf:C(o)}};a[e]=Math.max(f,y);break;case"not":if(!q(f)||!q(y))return{value:{allOf:C(o)}};var P=[f,y].reduce((function(e,t){return R(t.anyOf)&&1===Object.keys(t).length?C(e,t.anyOf):C(e,[t])}),[]);a.not={anyOf:P};break;case"patternProperties":if(!q(f)||!q(y))return{value:{allOf:C(o)}};v=Object.assign({},f);try{for(var M=(s=void 0,F(Object.keys(y))),k=M.next();!k.done;k=M.next()){if(!re(v,A=k.value)||h.default(v[A],y[A]))v[A]=y[A];else{if(!q(y[A])||!q(v[A]))return{value:{allOf:C(o)}};v[A]=fe(v[A],y[A])}}}catch(e){s={error:e}}finally{try{k&&!k.done&&(l=M.return)&&l.call(M)}finally{if(s)throw s.error}}a.patternProperties=v;break;case"properties":if(!q(f)||!q(y))return{value:{allOf:C(o)}};var N=Object.assign({},f);re(y,"additionalProperties")&&Object.keys(f).filter((function(e){return!Object.keys(y).includes(e)})).forEach((function(e){!1===y.additionalProperties?delete N[e]:q(y.additionalProperties)&&(N[e]=fe(N[e],y.additionalProperties))}));try{for(var S=(d=void 0,F(Object.keys(y))),V=S.next();!V.done;V=S.next()){var A=V.value;if(h.default(N[A],y[A])||!re(N,A)&&!re(N,"additionalProperties"))N[A]=y[A];else if(!re(N,A)&&re(N,"additionalProperties"))q(N.additionalProperties)&&(N[A]=fe(N.additionalProperties,y[A]));else{if(!q(y[A])||!q(N[A]))return{value:{allOf:C(o)}};N[A]=fe(N[A],y[A])}}}catch(e){d={error:e}}finally{try{V&&!V.done&&(c=S.return)&&c.call(S)}finally{if(d)throw d.error}}a.properties=N;break;case"required":if(R(f)&&R(y))a.required=ae.apply(void 0,C(f,y));else{if("boolean"!=typeof y||"boolean"!=typeof f)return{value:{allOf:C(o)}};a.required=!!f||!!y}break;case"$schema":case"$id":case"id":break;case"title":case"description":case"$comment":a[e]=y;break;case"type":if(!R(y)&&!L(y)||!R(f)&&!L(f))return{value:{allOf:C(o)}};var T=se(f,y);if(!T.length)return{value:{allOf:C(o)}};a.type=T.length>1?T:T[0];break;case"uniqueItems":a.uniqueItems=!!f||!!y;break;default:return{value:{allOf:C(o)}}}};try{for(var c=(r=void 0,F(Object.keys(u))),p=c.next();!p.done;p=c.next()){var m=p.value,f=d(m);if("object"==typeof f)return f.value}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return a}function he(e){}function ye(e,t,r){var n,o;void 0===t&&(t=!1),void 0===r&&(r=!0);var i={},a=function(e){var t=_(e,"strict");return{integer:"number",null:"string"}[t]||t},s=function(e){return ye(e,t,!1)};if(r&&(i.$schema="http://json-schema.org/draft-06/schema#"),i.type=a(e),"object"===i.type){i.properties={},t&&(i.required=[]);try{for(var l=F(Object.keys(e)),u=l.next();!u.done;u=l.next()){var d=u.value;i.properties[d]=s(e[d]),t&&i.required.push(d)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}else"array"===i.type&&(i.items=e.map(s),1===new Set(e.map(a)).size&&(i.items=i.items.reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})),t&&(i.minItems=1));return i}function ve(e,t,r){void 0===r&&(r="schema");var n=ce.parse(t);if(null===n)return console.error("getFromSchema error: Invalid JSON Pointer: "+t),null;var o=e,i=[],a=n.length;"parent"===r.slice(0,6)&&n.length--;for(var s=0;s<a;++s){var l=n[s],u=!1;if("object"!=typeof o)return console.error('getFromSchema error: Unable to find "'+l+'" key in schema.'),console.error(e),console.error(t),null;if("array"!==o.type||isNaN(l)&&"-"!==l?"object"===o.type&&(q(o.properties)&&re(o.properties,l)?(u=!0,o=o.properties[l],i.push("properties",l)):q(o.additionalProperties)?(u=!0,o=o.additionalProperties,i.push("additionalProperties")):!1!==o.additionalProperties&&(u=!0,o={},i.push("additionalProperties"))):(re(o,"items")&&(q(o.items)?(u=!0,o=o.items,i.push("items")):R(o.items)&&!isNaN(l)&&o.items.length>=+l&&(u=!0,o=o.items[+l],i.push("items",l))),!u&&q(o.additionalItems)?(u=!0,o=o.additionalItems,i.push("additionalItems")):!1!==o.additionalItems&&(u=!0,o={},i.push("additionalItems"))),!u)return console.error('getFromSchema error: Unable to find "'+l+'" item in schema.'),console.error(e),void console.error(t)}return"Pointer"===r.slice(-7)?i:o}function ge(e,t,r){if(void 0===r&&(r=new Map),!e)return"";var n=ce.toGenericPointer(ce.compile(e),r);if(-1===n.indexOf("/"))return n;for(var o=!0;o;)o=!1,t.forEach((function(e,t){if(ce.isSubPointer(e,t))for(;ce.isSubPointer(t,n,!0);)n=ce.toGenericPointer(e+n.slice(t.length),r),o=!0}));return n}function be(e,t){void 0===t&&(t=null);var r=ce.getFirst([[e,"/x-schema-form/type"],[e,"/x-schema-form/widget/component"],[e,"/x-schema-form/widget"],[e,"/widget/component"],[e,"/widget"]]);if(L(r))return xe(r,e,t);var n=e.type;if(n){if(R(n)&&(n=Y("object",n)&&re(e,"properties")?"object":Y("array",n)&&re(e,"items")||Y("array",n)&&re(e,"additionalItems")?"array":Y("string",n)?"string":Y("number",n)?"number":Y("integer",n)?"integer":Y("boolean",n)?"boolean":"unknown"),"boolean"===n)return"checkbox";if("object"===n){if(re(e,"properties")||re(e,"additionalProperties"))return"section";if(re(e,"$ref"))return"$ref"}if("array"===n)return re(ce.getFirst([[e,"/items"],[e,"/additionalItems"]])||{},"enum")&&1!==e.maxItems?xe("checkboxes",e,t):"array";if("null"===n)return"none";if(ce.has(t,"/options/titleMap")||re(e,"enum")||je(e,null,!0))return"select";if("number"===n||"integer"===n)return("integer"===n||re(e,"multipleOf"))&&re(e,"maximum")&&re(e,"minimum")?"range":n;if("string"===n)return{color:"color",date:"date","date-time":"datetime-local",email:"email",uri:"url"}[e.format]||"text"}return re(e,"$ref")?"$ref":R(e.oneOf)||R(e.anyOf)?"one-of":(console.error("getInputType error: Unable to determine input type for "+n),console.error("schema",e),t&&console.error("layoutNode",t),"none")}function xe(e,t,r){return void 0===r&&(r=null),!L(e)||"checkbox"!==e.slice(0,8)&&"radio"!==e.slice(0,5)?e:!0===ce.getFirst([[r,"/inline"],[r,"/options/inline"],[t,"/inline"],[t,"/x-schema-form/inline"],[t,"/x-schema-form/options/inline"],[t,"/x-schema-form/widget/inline"],[t,"/x-schema-form/widget/component/inline"],[t,"/x-schema-form/widget/component/options/inline"],[t,"/widget/inline"],[t,"/widget/component/inline"],[t,"/widget/component/options/inline"]])?"radio"===e.slice(0,5)?"radios-inline":"checkboxes-inline":e}function Ie(e,t){if(!q(e))return console.error("isInputRequired error: Input schema must be an object."),!1;var r=ce.parse(t);if(R(r)){if(!r.length)return!0===e.required;var n=r.pop(),o=r[r.length-1];["properties","additionalProperties","patternProperties","items","additionalItems"].includes(o)&&r.pop();var i=ce.get(e,r)||{};if(R(i.required))return i.required.includes(n);if("array"===i.type)return re(i,"minItems")&&E(n)&&+i.minItems>+n}return!1}function Fe(e,t,r){if(q(e)&&q(e.options)){var n={},o=function(e){return"ui:"===e.slice(0,3).toLowerCase()?e.slice(3):e};if(ie(n,r.formOptions.defautWidgetOptions,[],o),[[ce.get(t,"/ui:widget/options"),[]],[ce.get(t,"/ui:widget"),[]],[t,["additionalProperties","additionalItems","properties","items","required","type","x-schema-form","$ref"]],[ce.get(t,"/x-schema-form/options"),[]],[ce.get(t,"/x-schema-form"),["items","options"]],[e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"]],[e.options,[]]].forEach((function(e){var t=j(e,2),r=t[0],i=t[1];return ie(n,r,i,o)})),!re(n,"titleMap")){var i=null;(i=je(t,n.flatList))&&(n.titleMap=i),re(n,"titleMap")||re(n,"enum")||!re(t,"items")||(ce.has(t,"/items/titleMap")?n.titleMap=t.items.titleMap:ce.has(t,"/items/enum")?(n.enum=t.items.enum,!re(n,"enumNames")&&ce.has(t,"/items/enumNames")&&(n.enumNames=t.items.enumNames)):ce.has(t,"/items/oneOf")&&(i=je(t.items,n.flatList))&&(n.titleMap=i))}"integer"!==t.type||S(n.multipleOf)||(n.multipleOf=1),ce.has(n,"/autocomplete/source")?n.typeahead=n.autocomplete:ce.has(n,"/tagsinput/source")?n.typeahead=n.tagsinput:ce.has(n,"/tagsinput/typeahead/source")&&(n.typeahead=n.tagsinput.typeahead),e.options=n}}function je(e,t,r){void 0===e&&(e={}),void 0===t&&(t=null),void 0===r&&(r=!1);var n=null,o=e.oneOf||e.anyOf||null;if(R(o)&&o.every((function(e){return e.title}))){if(o.every((function(e){return R(e.enum)&&1===e.enum.length}))){if(r)return!0;n=o.map((function(e){return{name:e.title,value:e.enum[0]}}))}else if(o.every((function(e){return e.const}))){if(r)return!0;n=o.map((function(e){return{name:e.title,value:e.const}}))}if(!1!==t&&(n||[]).filter((function(e){return((e||{}).name||"").indexOf(": ")})).length>1){var i=n.map((function(e){var t=j(e.name.split(/: (.+)/),2),r=t[0],n=t[1];return r&&n?Object.assign(Object.assign({},e),{group:r,name:n}):e}));(!0===t||i.some((function(e,t){return t&&re(e,"group")&&e.group===i[t-1].group})))&&(n=i)}}return!r&&n}function Ce(e){if(!q(e))return null;var t={};if(re(e,"type"))switch(e.type){case"string":ee(["pattern","format","minLength","maxLength"],(function(r){re(e,r)&&(t[r]=[e[r]])}));break;case"number":case"integer":ee(["Minimum","Maximum"],(function(r){var n="exclusive"+r,o=r.toLowerCase();if(re(e,o)){var i=re(e,n)&&!0===e[n];t[o]=[e[o],i]}})),ee(["multipleOf","type"],(function(r){re(e,r)&&(t[r]=[e[r]])}));break;case"object":ee(["minProperties","maxProperties","dependencies"],(function(r){re(e,r)&&(t[r]=[e[r]])}));break;case"array":ee(["minItems","maxItems","uniqueItems"],(function(r){re(e,r)&&(t[r]=[e[r]])}))}return re(e,"enum")&&(t.enum=[e.enum]),t}function we(e,t,r,n,o){if(q(e)){var i=new Set,a=new Set,s=new Map,l=new Map,u={};ce.forEachDeep(e,(function(e,t){if(re(e,"$ref")&&L(e.$ref)){var r=ce.compile(e.$ref);i.add(r),a.add(t+"~~"+r),s.set(t,r)}})),i.forEach((function(t){return u[t]=Oe(e,t)}));for(var d=!0;d;)d=!1,Array.from(s).forEach((function(e){var t=j(e,2),r=t[0],n=t[1];return Array.from(s).filter((function(e){var t=j(e,2),o=t[0],i=t[1];return ce.isSubPointer(n,o,!0)&&!ce.isSubPointer(i,n,!0)&&!a.has(r+o.slice(n.length)+"~~"+i)})).forEach((function(e){var t=j(e,2),o=t[0],i=t[1];a.add(r+o.slice(n.length)+"~~"+i),d=!0}))}));Array.from(a).map((function(e){return e.split("~~")})).filter((function(e){var t=j(e,2),r=t[0],n=t[1];return ce.isSubPointer(n,r)})).forEach((function(e){var t=j(e,2),r=t[0],n=t[1];return l.set(r,n)})),Array.from(s).filter((function(e){var t=j(e,2),r=t[0];t[1];return Array.from(l.keys()).every((function(e){return!ce.isSubPointer(r,e,!0)}))})).forEach((function(e){var t=j(e,2),r=t[0],n=t[1];return Array.from(l).filter((function(e){var t=j(e,2),o=t[0];t[1];return!l.has(r+o.slice(n.length))&&ce.isSubPointer(n,o,!0)&&!ce.isSubPointer(n,r,!0)})).forEach((function(e){var t=j(e,2),o=t[0],i=t[1];return l.set(r+o.slice(n.length),r+i.slice(n.length))}))}));var c=Object.assign({},e);return delete c.definitions,c=Oe(c,"",u,l),ce.forEachDeep(c,(function(e,i){if(L(e.$ref)){var a=ce.compile(e.$ref);ce.isSubPointer(a,i,!0)||(a=ge(i,l),ce.set(c,i,{$ref:"#"+a})),re(t,"refPointer")||(t[a]=a.length?Oe(c,a,t,l):c),r.has(i)||r.set(i,a);var s=ce.toDataPointer(i,c);if(!n.has(s)){var u=ce.toDataPointer(a,c);n.set(s,u)}}if("array"===e.type&&(re(e,"items")||re(e,"additionalItems"))){var d=ce.toDataPointer(i,c);if(!o.has(d)){var p=R(e.items)?e.items.length:0;o.set(d,p)}}}),!0),c}console.error("resolveSchemaReferences error: schema must be an object.")}function Oe(e,t,r,n,o){if(void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=[]),!r||!n)return ce.getCopy(e,t);"string"!=typeof t&&(t=ce.compile(t)),o=C(o,[t]);var i=null;if(""===t)i=f.default(e);else{var a=ge(t,n);a!==t&&(o=C(o,[a])),i=ce.getFirstCopy([[r,[a]],[e,t],[e,a]])}return ce.forEachDeepCopy(i,(function(t,i){if(q(t)){if(L(t.$ref)){var a=ce.compile(t.$ref);if(a.length&&o.every((function(e){return!ce.isSubPointer(a,e,!0)}))){var s=Oe(e,a,r,n,o);if(1===Object.keys(t).length)return s;var l=Object.assign({},t);return delete l.$ref,fe(s,l)}}if(R(t.allOf))return De(t);if("array"===t.type&&R(t.required))return Pe(t)}return t}),!0,t)}function De(e){if(!q(e)||!R(e.allOf))return e;var t=fe.apply(void 0,C(e.allOf));if(Object.keys(e).length>1){var r=Object.assign({},e);delete r.allOf,t=fe(t,r)}return t}function Pe(e){if("array"===e.type&&R(e.required)){var t=re(e.items,"properties")?"items":re(e.additionalItems,"properties")?"additionalItems":null;t&&!re(e[t],"required")&&(re(e[t],"additionalProperties")||e.required.every((function(r){return re(e[t].properties,r)})))&&((e=f.default(e))[t].required=e.required,delete e.required)}return e}function Me(e,t,r,n,o,i){void 0===t&&(t=null),void 0===r&&(r=!0),void 0===n&&(n=""),void 0===o&&(o=""),void 0===i&&(i="");var a=ce.get(e.schema,n);r?!N(t)&&(!0===e.formOptions.setSchemaDefaults||"auto"===e.formOptions.setSchemaDefaults&&V(e.formValues))&&(t=ce.get(e.schema,n+"/default")):t=null;var s=ce.get(a,"/type"),l=(re(a,"properties")||re(a,"additionalProperties"))&&"object"===s?"FormGroup":(re(a,"items")||re(a,"additionalItems"))&&"array"===s?"FormArray":!s&&re(a,"$ref")?"$ref":"FormControl",u=ge(o,e.dataRecursiveRefMap,e.arrayMap);e.dataMap.has(u)||e.dataMap.set(u,new Map);var d,c=e.dataMap.get(u);c.has("schemaType")||(c.set("schemaPointer",n),c.set("schemaType",a.type),a.format&&(c.set("schemaFormat",a.format),a.type||c.set("schemaType","string")),l&&(c.set("templatePointer",i),c.set("templateType",l)));var p=Ce(a);switch(l){case"FormGroup":if(d={},re(a,"ui:order")||re(a,"properties")){var m=a["ui:order"]||Object.keys(a.properties);if(m.includes("*")&&!re(a.properties,"*"))for(var h=Object.keys(a.properties).filter((function(e){return!m.includes(e)})),y=m.length-1;y>=0;y--)"*"===m[y]&&m.splice.apply(m,C([y,1],h));m.filter((function(e){return re(a.properties,e)||re(a,"additionalProperties")})).forEach((function(s){return d[s]=Me(e,ce.get(t,[s]),r,n+(re(a.properties,s)?"/properties/"+s:"/additionalProperties"),o+"/"+s,i+"/controls/"+s)})),e.formOptions.fieldsRequired=Ne(a,d)}return{controlType:l,controls:d,validators:p};case"FormArray":d=[];var v=Math.max(a.minItems||0,c.get("minItems")||0),g=Math.min(a.maxItems||1e3,c.get("maxItems")||1e3),b=null;if(R(a.items)){var x=c.get("tupleItems")||(R(a.items)?Math.min(a.items.length,g):0);for(y=0;y<x;y++)if(y<v)d.push(Me(e,R(t)?t[y]:t,r,n+"/items/"+y,o+"/"+y,i+"/controls/"+y));else{var I=ge(n+"/items/"+y,e.schemaRecursiveRefMap),F=(j=ge(u+"/"+y,e.dataRecursiveRefMap,e.arrayMap))!==u+"/"+y;re(e.templateRefLibrary,j)||(e.templateRefLibrary[j]=null,e.templateRefLibrary[j]=Me(e,null,r,I,j,i+"/controls/"+y)),d.push(R(t)?Me(e,t[y],r,n+"/items/"+y,o+"/"+y,i+"/controls/"+y):F?null:f.default(e.templateRefLibrary[j]))}a.items.length<g&&q(a.additionalItems)&&(b=n+"/additionalItems")}else b=n+"/items";if(b){var j;I=ge(b,e.schemaRecursiveRefMap),F=(j=ge(u+"/-",e.dataRecursiveRefMap,e.arrayMap))!==u+"/-";re(e.templateRefLibrary,j)||(e.templateRefLibrary[j]=null,e.templateRefLibrary[j]=Me(e,null,r,I,j,i+"/controls/-"));var w=c;if(!F||re(p,"required")){var O=Math.min(Math.max(F?0:w.get("tupleItems")+w.get("listItems")||0,R(t)?t.length:0),g);for(y=d.length;y<O;y++)d.push(R(t)?Me(e,t[y],r,I,o+"/-",i+"/controls/-"):F?null:f.default(e.templateRefLibrary[j]))}}return{controlType:l,controls:d,validators:p};case"$ref":var D=ce.compile(a.$ref),P=ge(ce.toDataPointer(D,a),e.dataRecursiveRefMap,e.arrayMap);if(P&&!re(e.templateRefLibrary,P)){e.templateRefLibrary[P]=null;var M=Me(e,r,r,D);M?e.templateRefLibrary[P]=M:delete e.templateRefLibrary[P]}return null;case"FormControl":return{controlType:l,value:{value:r&&B(t)?t:null,disabled:c.get("disabled")||!1},validators:p};default:return null}}function ke(e){var t=[],n=null;if(re(e,"validators")&&(ee(e.validators,(function(e,r){"function"==typeof me[r]&&t.push(me[r].apply(null,e))})),t.length&&Y(e.controlType,["FormGroup","FormArray"])&&(n=t.length>1?me.compose(t):t[0])),re(e,"controlType"))switch(e.controlType){case"FormGroup":var o={};return ee(e.controls,(function(e,t){var r=ke(e);r&&(o[t]=r)})),new r.FormGroup(o,n);case"FormArray":return new r.FormArray(g.default(b.default(e.controls,(function(e){return ke(e)}))),n);case"FormControl":return new r.FormControl(e.value,t)}return null}function Ne(e,t){var r=!1;if(re(e,"required")&&!V(e.required)){r=!0;var n=R(e.required)?e.required:[e.required];n=ee(n,(function(e){return ce.set(t,"/"+e+"/validators/required",[])}))}return r}function Se(e,t,r,n,o,i){if(void 0===o&&(o=!1),void 0===i&&(i=!1),null===e||"object"!=typeof e)return e;var a=R(e)?[]:{};return ce.forEachDeep(e,(function(e,s){if(o&&R(e))ce.set(a,s,[]);else if(o&&q(e)&&!$(e))ce.set(a,s,{});else{var l=ce.has(t,[s,"schemaType"])?s:ge(s,r,n);if(ce.has(t,[l,"schemaType"])){var u=t.get(l).get("schemaType");if("null"===u)ce.set(a,s,null);else if((S(e)||o)&&Y(u,["string","integer","number","boolean"])){var d=i||null===e&&o?G(e,u):H(e,u);(N(d)||o)&&ce.set(a,s,d)}"date-time"===t.get(l).get("schemaFormat")&&(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?$/i.test(e)?ce.set(a,s,e+"Z"):/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d$/i.test(e)?ce.set(a,s,e+":00Z"):i&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e)&&ce.set(a,s,e+":00:00:00Z"))}else("object"!=typeof e||$(e)||null===e&&o)&&(console.error("formatFormData error: Schema type not found for form value at "+l),console.error("dataMap",t),console.error("recursiveRefMap",r),console.error("genericPointer",l))}})),a}function Ve(e,t,r){var n,o;if(void 0===r&&(r=!1),!q(e)||!ce.isJsonPointer(t)){if(!ce.isJsonPointer(t)){if("string"==typeof t)if(i=e.get(t))return i;console.error("getControl error: Invalid JSON Pointer: "+t)}return q(e)||console.error("getControl error: Invalid formGroup: "+e),null}var i,a=ce.parse(t);if((r&&(a=a.slice(0,-1)),"function"==typeof e.get&&a.every((function(e){return-1===e.indexOf(".")})))&&(i=e.get(a.join("."))))return i;var s=e;try{for(var l=F(a),u=l.next();!u.done;u=l.next()){var d=u.value;if(re(s,"controls")&&(s=s.controls),R(s)&&"-"===d)s=s[s.length-1];else{if(!re(s,d))return console.error('getControl error: Unable to find "'+d+'" item in FormGroup.'),console.error(t),void console.error(e);s=s[d]}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return s}function Le(e,t){var r=!ce.get(e,"/formOptions/addSubmit"),n=Ae(e.layout,(function(n,o,i){var a={_id:x.default(),options:{}};if(q(n))Object.assign(a,n),Object.keys(a).filter((function(e){return!Y(e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"])})).forEach((function(e){a.options[e]=a[e],delete a[e]})),!re(a,"type")&&L(a.widget)&&(a.type=a.widget,delete a.widget),re(a.options,"title")||re(a.options,"legend")&&(a.options.title=a.options.legend,delete a.options.legend),re(a.options,"validationMessages")||(re(a.options,"errorMessages")?(a.options.validationMessages=a.options.errorMessages,delete a.options.errorMessages):re(a.options,"validationMessage")&&("string"==typeof a.options.validationMessage?a.options.validationMessages=a.options.validationMessage:(a.options.validationMessages={},Object.keys(a.options.validationMessage).forEach((function(e){var t=e+"",r="0"===t?"type":"1"===t?"enum":"100"===t?"multipleOf":"101"===t?"minimum":"102"===t?"exclusiveMinimum":"103"===t?"maximum":"104"===t?"exclusiveMaximum":"200"===t?"minLength":"201"===t?"maxLength":"202"===t?"pattern":"300"===t?"minProperties":"301"===t?"maxProperties":"302"===t?"required":"304"===t?"dependencies":"400"===t?"minItems":"401"===t?"maxItems":"402"===t?"uniqueItems":"500"===t?"format":t+"";a.options.validationMessages[r]=a.options.validationMessage[e]}))),delete a.options.validationMessage));else if(ce.isJsonPointer(n))a.dataPointer=n;else{if(!L(n))return console.error("buildLayout error: Form layout element not recognized:"),console.error(n),null;a.key=n}var s=null;if(!re(a,"dataPointer"))if(re(a,"key"))a.dataPointer="*"===a.key?a.key:ce.compile(ce.parseObjectPath(a.key),"-"),delete a.key;else if(re(a,"type")&&"array"===a.type.slice(-5)){var l=function(e){var t,r;if(null!==e&&"object"==typeof e){if(re(e,"dataPointer"))return e.dataPointer;if(R(e.items))try{for(var n=F(e.items),o=n.next();!o.done;o=n.next()){var i=o.value;if(re(i,"dataPointer")&&-1!==i.dataPointer.indexOf("/-"))return i.dataPointer;if(re(i,"items")){var a=l(i);if(a)return a}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},u=l(a);u&&(a.dataPointer=u.slice(0,u.lastIndexOf("/-")))}if(re(a,"dataPointer")){if("*"===a.dataPointer)return Ee(e,t,e.formValues);var d=ce.get(e.formValues,a.dataPointer.replace(/\/-/g,"/1"));a.dataPointer=ce.toGenericPointer(a.dataPointer,e.arrayMap);var c=ce.toKey(a.dataPointer);!a.name&&L(c)&&"-"!==c&&(a.name=c);var p=ge(a.dataPointer,e.dataRecursiveRefMap,e.arrayMap),m=!p.length||p!==a.dataPointer,h=void 0;e.dataMap.has(p)||e.dataMap.set(p,new Map);var y=e.dataMap.get(p);if(y.has("schemaPointer")?h=y.get("schemaPointer"):(h=ce.toSchemaPointer(p,e.schema),y.set("schemaPointer",h)),y.set("disabled",!!a.options.disabled),s=ce.get(e.schema,h)){if(re(a,"type"))if(t.hasWidget(a.type))a.type=xe(a.type,s,a);else{var v=a.type;a.type=be(s,a),console.error('error: widget type "'+v+'" not found in library. Replacing with "'+a.type+'".')}else a.type=be(s,a);"object"===s.type&&R(s.required)&&y.set("required",s.required),a.dataType=s.type||(re(s,"$ref")?"$ref":null),Fe(a,s,e),"checkboxes"===a.type&&re(s,"items")?Fe(a,s.items,e):"array"===a.dataType&&(a.options.maxItems=Math.min(s.maxItems||1e3,a.options.maxItems||1e3),a.options.minItems=Math.max(s.minItems||0,a.options.minItems||0),a.options.listItems=Math.max(a.options.listItems||0,R(d)?d.length:0),a.options.tupleItems=R(s.items)?s.items.length:0,a.options.maxItems<a.options.tupleItems?(a.options.tupleItems=a.options.maxItems,a.options.listItems=0):a.options.maxItems<a.options.tupleItems+a.options.listItems?a.options.listItems=a.options.maxItems-a.options.tupleItems:a.options.minItems>a.options.tupleItems+a.options.listItems&&(a.options.listItems=a.options.minItems-a.options.tupleItems),y.has("maxItems")||(y.set("maxItems",a.options.maxItems),y.set("minItems",a.options.minItems),y.set("tupleItems",a.options.tupleItems),y.set("listItems",a.options.listItems)),e.arrayMap.has(p)||e.arrayMap.set(p,a.options.tupleItems)),Ie(e.schema,h)&&(a.options.required=!0,e.fieldsRequired=!0)}else Fe(a,{},e);if(a.options.title||/^\d+$/.test(a.name)||(a.options.title=le(a.name)),re(a.options,"copyValueTo")&&("string"==typeof a.options.copyValueTo&&(a.options.copyValueTo=[a.options.copyValueTo]),R(a.options.copyValueTo)&&(a.options.copyValueTo=a.options.copyValueTo.map((function(e){return ce.compile(ce.parseObjectPath(e),"-")})))),a.widget=t.getWidget(a.type),y.set("inputType",a.type),y.set("widget",a.widget),"array"===a.dataType&&(re(a,"items")||re(a,"additionalItems"))){var g=ge(a.dataPointer+"/-",e.dataRecursiveRefMap,e.arrayMap);if(e.dataMap.has(g)||e.dataMap.set(g,new Map),e.dataMap.get(g).set("inputType","section"),a.items.length>1){for(var b=[],I=a.items.length-1;I>=0;I--){var j=a.items[I];if(re(j,"dataPointer")&&j.dataPointer.slice(0,g.length)===g){var C=a.items.splice(I,1)[0];C.dataPointer=a.dataPointer+"/-"+C.dataPointer.slice(g.length),b.unshift(C)}else j.arrayItem=!0,j.arrayItemType="list",j.removable=!1!==a.options.removable}b.length&&a.items.push({_id:x.default(),arrayItem:!0,arrayItemType:a.options.tupleItems>a.items.length?"tuple":"list",items:b,options:{removable:!1!==a.options.removable},dataPointer:a.dataPointer+"/-",type:"section",widget:t.getWidget("section")})}else a.items[0].arrayItem=!0,a.items[0].dataPointer||(a.items[0].dataPointer=ce.toGenericPointer(g,e.arrayMap)),ce.has(a,"/items/0/options/removable")||(a.items[0].options.removable=!0),!1===a.options.orderable&&(a.items[0].options.orderable=!1),a.items[0].arrayItemType=a.options.tupleItems?"tuple":"list";if(R(a.items)){var w=a.items.filter((function(e){return"$ref"!==e.type})).length-a.options.tupleItems;w>a.options.listItems&&(a.options.listItems=w,y.set("listItems",w))}if(re(e.layoutRefLibrary,g)||(e.layoutRefLibrary[g]=f.default(a.items[a.items.length-1]),m&&(e.layoutRefLibrary[g].recursiveReference=!0),ee(e.layoutRefLibrary[g],(function(e,t){re(e,"_id")&&(e._id=null),m&&re(e,"dataPointer")&&(e.dataPointer=e.dataPointer.slice(g.length))}),"top-down")),!a.recursiveReference||a.options.required){var O=Math.min(Math.max(a.options.tupleItems+a.options.listItems,R(d)?d.length:0),a.options.maxItems);for(I=a.items.length;I<O;I++)a.items.push(Te({$ref:g,dataPointer:a.dataPointer,recursiveReference:a.recursiveReference},e,t))}if(!1!==a.options.addable&&a.options.minItems<a.options.maxItems&&"$ref"!==(a.items[a.items.length-1]||{}).type){var D="Add";if(a.options.title)/^add\b/i.test(a.options.title)?D=a.options.title:D+=" "+a.options.title;else if(a.name&&!/^\d+$/.test(a.name))/^add\b/i.test(a.name)?D+=" "+le(a.name):D=le(a.name);else{var P=ve(e.schema,a.dataPointer,"parentSchema");if(re(P,"title"))D+=" to "+P.title;else{var M=ce.parse(a.dataPointer);D+=" to "+le(M[M.length-2])}}a.items.push({_id:x.default(),arrayItem:!0,arrayItemType:"list",dataPointer:a.dataPointer+"/-",options:{listItems:a.options.listItems,maxItems:a.options.maxItems,minItems:a.options.minItems,removable:!1,title:D,tupleItems:a.options.tupleItems},recursiveReference:m,type:"$ref",widget:t.getWidget("$ref"),$ref:g}),L(ce.get(a,"/style/add"))&&(a.items[a.items.length-1].options.fieldStyle=a.style.add,delete a.style.add,V(a.style)&&delete a.style)}}else a.arrayItem=!1}else if(re(a,"type")||re(a,"items")){var k=ce.get(e.layout,i,0,-2).type;re(a,"type")||(a.type=Y(k,["tabs","tabarray"])?"tab":"array"),a.arrayItem="array"===k,a.widget=t.getWidget(a.type),Fe(a,{},e)}return"submit"===a.type&&(r=!0),a}));if(e.hasRootReference){var o=f.default(n);"submit"===o[o.length-1].type&&o.pop(),e.layoutRefLibrary[""]={_id:null,dataPointer:"",dataType:"object",items:o,name:"",options:f.default(e.formOptions.defautWidgetOptions),recursiveReference:!0,required:!1,type:"section",widget:t.getWidget("section")}}return r||n.push({_id:x.default(),options:{title:"Submit"},type:"submit",widget:t.getWidget("submit")}),n}function Ee(e,t,r,n,o,i,a,s,l,u){void 0===r&&(r=null),void 0===n&&(n=""),void 0===o&&(o=""),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=!1),void 0===u&&(u="");var d=ce.get(e.schema,n);if(!re(d,"type")&&!re(d,"$ref")&&!re(d,"x-schema-form"))return null;var c=be(d);!N(r)&&(!0===e.formOptions.setSchemaDefaults||"auto"===e.formOptions.setSchemaDefaults&&V(e.formValues))&&(r=ce.get(e.schema,n+"/default"));var p={_id:l?null:x.default(),arrayItem:i,dataPointer:ce.toGenericPointer(o,e.arrayMap),dataType:d.type||(re(d,"$ref")?"$ref":null),options:{},required:Ie(e.schema,n),type:c,widget:t.getWidget(c)},m=ce.toKey(p.dataPointer);"-"!==m&&(p.name=m),p.arrayItem&&(p.arrayItemType=a,p.options.removable=!1!==s);var f=ge(u+o,e.dataRecursiveRefMap,e.arrayMap);f.length;e.dataMap.has(f)||e.dataMap.set(f,new Map);var h=e.dataMap.get(f);if(h.has("inputType")||(h.set("schemaPointer",n),h.set("inputType",p.type),h.set("widget",p.widget),h.set("disabled",!!p.options.disabled)),Fe(p,d,e),p.options.title||!p.name||/^\d+$/.test(p.name)||(p.options.title=le(p.name)),"object"===p.dataType){if(R(d.required)&&!h.has("required")&&h.set("required",d.required),q(d.properties)){var y=[],v=d["ui:order"]||Object.keys(d.properties);if(v.includes("*")&&!re(d.properties,"*"))for(var g=Object.keys(d.properties).filter((function(e){return!v.includes(e)})),b=v.length-1;b>=0;b--)"*"===v[b]&&v.splice.apply(v,C([b,1],g));v.filter((function(e){return re(d.properties,e)||re(d,"additionalProperties")})).forEach((function(i){var a=re(d.properties,i)?"/properties/"+i:"/additionalProperties",s=Ee(e,t,q(r)?r[i]:null,n+a,o+"/"+i,!1,null,null,l,u);s&&(Ie(d,"/"+i)&&(s.options.required=!0,e.fieldsRequired=!0),y.push(s))})),""!==o||l?p.items=y:p=y}}else if("array"===p.dataType){p.items=[],p.options.maxItems=Math.min(d.maxItems||1e3,p.options.maxItems||1e3),p.options.minItems=Math.max(d.minItems||0,p.options.minItems||0),!p.options.minItems&&Ie(e.schema,n)&&(p.options.minItems=1),re(p.options,"listItems")||(p.options.listItems=1),p.options.tupleItems=R(d.items)?d.items.length:0,p.options.maxItems<=p.options.tupleItems?(p.options.tupleItems=p.options.maxItems,p.options.listItems=0):p.options.maxItems<p.options.tupleItems+p.options.listItems?p.options.listItems=p.options.maxItems-p.options.tupleItems:p.options.minItems>p.options.tupleItems+p.options.listItems&&(p.options.listItems=p.options.minItems-p.options.tupleItems),h.has("maxItems")||(h.set("maxItems",p.options.maxItems),h.set("minItems",p.options.minItems),h.set("tupleItems",p.options.tupleItems),h.set("listItems",p.options.listItems)),e.arrayMap.has(f)||e.arrayMap.set(f,p.options.tupleItems),s=!1!==p.options.removable;var I=null;if(R(d.items)){p.items=[];for(b=0;b<p.options.tupleItems;b++){var F=void 0,j=!(w=ge(f+"/"+b,e.dataRecursiveRefMap,e.arrayMap)).length||w!==f+"/"+b;s&&b>=p.options.minItems?(re(e.layoutRefLibrary,w)||(e.layoutRefLibrary[w]=null,e.layoutRefLibrary[w]=Ee(e,t,R(r)?r[b]:null,n+"/items/"+b,j?"":o+"/"+b,!0,"tuple",!0,!0,j?o+"/"+b:""),j&&(e.layoutRefLibrary[w].recursiveReference=!0)),F=Te({$ref:w,dataPointer:o+"/"+b,recursiveReference:j},e,t,R(r)?r[b]:null)):F=Ee(e,t,R(r)?r[b]:null,n+"/items/"+b,o+"/"+b,!0,"tuple",!1,l,u),F&&p.items.push(F)}q(d.additionalItems)&&(I=n+"/additionalItems")}else q(d.items)&&(I=n+"/items");if(I){j=!(w=ge(f+"/-",e.dataRecursiveRefMap,e.arrayMap)).length||w!==f+"/-";var w,O=ge(I,e.schemaRecursiveRefMap,e.arrayMap);if(w.length&&!re(e.layoutRefLibrary,w)&&(e.layoutRefLibrary[w]=null,e.layoutRefLibrary[w]=Ee(e,t,null,O,j?"":o+"/-",!0,"list",s,!0,j?o+"/-":""),j&&(e.layoutRefLibrary[w].recursiveReference=!0)),!j||p.options.required){var D=Math.min(Math.max(j?0:p.options.tupleItems+p.options.listItems,R(r)?r.length:0),p.options.maxItems);if(p.items.length<D)for(b=p.items.length;b<D;b++)p.items.push(Te({$ref:w,dataPointer:o+"/-",recursiveReference:j},e,t,R(r)?r[b]:null))}if(!1!==p.options.addable&&p.options.minItems<p.options.maxItems&&"$ref"!==(p.items[p.items.length-1]||{}).type){var P=(S=((e.layoutRefLibrary[w]||{}).options||{}).title)?"Add ":"Add to ";S||(S=d.title||le(ce.toKey(o))),/^add\b/i.test(S)||(S=P+S),p.items.push({_id:x.default(),arrayItem:!0,arrayItemType:"list",dataPointer:p.dataPointer+"/-",options:{listItems:p.options.listItems,maxItems:p.options.maxItems,minItems:p.options.minItems,removable:!1,title:S,tupleItems:p.options.tupleItems},recursiveReference:j,type:"$ref",widget:t.getWidget("$ref"),$ref:w})}}}else if("$ref"===p.dataType){var M=ce.compile(d.$ref),k=ce.toDataPointer(M,e.schema),S="";if(p.options.add)S=p.options.add;else if(p.name&&!/^\d+$/.test(p.name))S=(/^add\b/i.test(p.name)?"":"Add ")+le(p.name);else{var L=ce.get(e.schema,n,0,-1);if(re(L,"title"))S="Add to "+L.title;else{var A=ce.parse(p.dataPointer);S="Add to "+le(A[A.length-2])}}if(Object.assign(p,{recursiveReference:!0,widget:t.getWidget("$ref"),$ref:k}),Object.assign(p.options,{removable:!1,title:S}),E(ce.get(e.schema,n,0,-1).maxItems)&&(p.options.maxItems=ce.get(e.schema,n,0,-1).maxItems),k.length)if(re(e.layoutRefLibrary,k))e.layoutRefLibrary[k].recursiveReference||(e.layoutRefLibrary[k].recursiveReference=!0);else{e.layoutRefLibrary[k]=null;var T=Ee(e,t,null,M,"",p.arrayItem,p.arrayItemType,!0,!0,o);T?(T.recursiveReference=!0,e.layoutRefLibrary[k]=T):delete e.layoutRefLibrary[k]}}return p}function Ae(e,t,r,n){void 0===r&&(r=""),void 0===n&&(n=e);var o=0,i=[];return ee(e,(function(e,a){var s=+a+o,l=r+"/"+s,u=X(e),d=[];q(e)&&(re(e,"tabs")&&(e.items=e.tabs,delete e.tabs),re(e,"items")&&(d=R(e.items)?e.items:[e.items])),d.length&&(u.items=Ae(d,t,l+"/items",n)),N(u=t(u,s,l,n))?(R(u)&&(o+=u.length-1),i=i.concat(u)):o--})),i}function Te(e,t,r,n){if(void 0===r&&(r=null),void 0===n&&(n=null),e.recursiveReference&&r)return(o=f.default(e)).options||(o.options={}),Object.assign(o,{recursiveReference:!0,widget:r.getWidget("$ref")}),Object.assign(o.options,{removable:!1,title:"Add "+o.$ref}),o;var o=t.layoutRefLibrary[e.$ref];return N(n)?o=Ee(t,r,n,ce.toSchemaPointer(e.$ref,t.schema),e.$ref,o.arrayItem,o.arrayItemType,o.options.removable,!1):(o=f.default(o),ce.forEachDeep(o,(function(t,r){re(t,"_id")&&(t._id=x.default()),e.recursiveReference&&re(t,"dataPointer")&&(t.dataPointer=e.dataPointer+t.dataPointer)}))),o}function qe(e,t,r,n){var o,i,a,s,l,u,d,c;void 0===r&&(r=!0),void 0===n&&(n=!0);var p=[],m=!1;if(e)if(R(e))if(t)try{for(var f=F(Object.keys(e)),h=f.next();!h.done;h=f.next()){if(q(e[O=h.value])){var y=e[O].value;if(t.includes(y)){var v=e[O].name;p.push({name:v,value:y}),null==y&&(m=!0)}}else if(L(e[O])&&O<t.length){v=e[O],y=t[O];p.push({name:v,value:y}),null==y&&(m=!0)}}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}else p=e,r||(m=!!p.filter((function(e){return void 0===e.value||null===e.value})).length);else if(t)try{for(var g=F(Object.keys(t)),b=g.next();!b.done;b=g.next()){if(re(e,y=t[O=b.value])){v=e[y];p.push({name:v,value:y}),null==y&&(m=!0)}}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}else try{for(var x=F(Object.keys(e)),I=x.next();!I.done;I=x.next()){v=e[y=I.value];p.push({name:v,value:y}),null==y&&(m=!0)}}catch(e){l={error:e}}finally{try{I&&!I.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}else if(t)try{for(var j=F(Object.keys(t)),w=j.next();!w.done;w=j.next()){var O;v=t[O=w.value],y=t[O];p.push({name:v,value:y}),null==y&&(m=!0)}}catch(e){d={error:e}}finally{try{w&&!w.done&&(c=j.return)&&c.call(j)}finally{if(d)throw d.error}}else p=[{name:"True",value:!0},{name:"False",value:!1}];return p.some((function(e){return re(e,"group")}))&&(m=!1,p=n?p.reduce((function(e,t){return re(t,"group")?(R(t.items)&&(e=C(e,t.items.map((function(e){return Object.assign(Object.assign({},e),{name:t.group+": "+e.name})}))),t.items.some((function(e){return void 0===e.value||null===e.value}))&&(m=!0)),re(t,"name")&&re(t,"value")&&(t.name=t.group+": "+t.name,delete t.group,e.push(t),void 0!==t.value&&null!==t.value||(m=!0))):(e.push(t),void 0!==t.value&&null!==t.value||(m=!0)),e}),[]):p.reduce((function(e,t){return re(t,"group")?(t.group!==(e[e.length-1]||{}).group&&e.push({group:t.group,items:t.items||[]}),re(t,"name")&&re(t,"value")&&(e[e.length-1].items.push({name:t.name,value:t.value}),void 0!==t.value&&null!==t.value||(m=!0))):(e.push(t),void 0!==t.value&&null!==t.value||(m=!0)),e}),[])),r||m||p.unshift({name:"<em>None</em>",value:null}),p}var Re=["January","February","March","April","May","June","July","August","September","October","November","December"],$e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],We=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var _e={required:"Darf nicht leer sein",minLength:"Mindestens {{minimumLength}} Zeichen bentigt (aktuell: {{currentLength}})",maxLength:"Maximal {{maximumLength}} Zeichen erlaubt (aktuell: {{currentLength}})",pattern:"Entspricht nicht diesem regulren Ausdruck: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Muss ein Datum sein, z. B. "2000-12-31"';case"time":return'Muss eine Zeitangabe sein, z. B. "16:20" oder "03:14:15.9265"';case"date-time":return'Muss Datum mit Zeit beinhalten, z. B. "2000-03-14T01:59" oder "2000-03-14T01:59:26.535Z"';case"email":return'Keine gltige E-Mail-Adresse (z. B. "name@example.com")';case"hostname":return'Kein gltiger Hostname (z. B. "example.com")';case"ipv4":return'Keine gltige IPv4-Adresse (z. B. "127.0.0.1")';case"ipv6":return'Keine gltige IPv6-Adresse (z. B. "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0")';case"url":return'Keine gltige URL (z. B. "http://www.example.com/page.html")';case"uuid":return'Keine gltige UUID (z. B. "12345678-9ABC-DEF0-1234-56789ABCDEF0")';case"color":return'Kein gltiger Farbwert (z. B. "#FFFFFF" oder "rgb(255, 255, 255)")';case"json-pointer":return'Kein gltiger JSON-Pointer (z. B. "/pointer/to/something")';case"relative-json-pointer":return'Kein gltiger relativer JSON-Pointer (z. B. "2/pointer/to/something")';case"regex":return'Kein gltiger regulrer Ausdruck (z. B. "(1-)?\\d{3}-\\d{3}-\\d{4}")';default:return"Muss diesem Format entsprechen: "+e.requiredFormat}},minimum:"Muss mindestens {{minimumValue}} sein",exclusiveMinimum:"Muss grer als {{exclusiveMinimumValue}} sein",maximum:"Darf maximal {{maximumValue}} sein",exclusiveMaximum:"Muss kleiner als {{exclusiveMaximumValue}} sein",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Maximal "+Math.log10(1/e.multipleOfValue)+" Dezimalstellen erlaubt":"Muss ein Vielfaches von "+e.multipleOfValue+" sein"},minProperties:"Mindestens {{minimumProperties}} Attribute erforderlich (aktuell: {{currentProperties}})",maxProperties:"Maximal {{maximumProperties}} Attribute erlaubt (aktuell: {{currentProperties}})",minItems:"Mindestens {{minimumItems}} Werte erforderlich (aktuell: {{currentItems}})",maxItems:"Maximal {{maximumItems}} Werte erlaubt (aktuell: {{currentItems}})",uniqueItems:"Alle Werte mssen eindeutig sein"},Je={required:"This field is required.",minLength:"Must be {{minimumLength}} characters or longer (current length: {{currentLength}})",maxLength:"Must be {{maximumLength}} characters or shorter (current length: {{currentLength}})",pattern:"Must match pattern: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Must be a date, like "2000-12-31"';case"time":return'Must be a time, like "16:20" or "03:14:15.9265"';case"date-time":return'Must be a date-time, like "2000-03-14T01:59" or "2000-03-14T01:59:26.535Z"';case"email":return'Must be an email address, like "name@example.com"';case"hostname":return'Must be a hostname, like "example.com"';case"ipv4":return'Must be an IPv4 address, like "127.0.0.1"';case"ipv6":return'Must be an IPv6 address, like "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Must be a url, like "http://www.example.com/page.html"';case"uuid":return'Must be a uuid, like "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Must be a color, like "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Must be a JSON Pointer, like "/pointer/to/something"';case"relative-json-pointer":return'Must be a relative JSON Pointer, like "2/pointer/to/something"';case"regex":return'Must be a regular expression, like "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Must be a correctly formatted "+e.requiredFormat}},minimum:"Must be {{minimumValue}} or more",exclusiveMinimum:"Must be more than {{exclusiveMinimumValue}}",maximum:"Must be {{maximumValue}} or less",exclusiveMaximum:"Must be less than {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Must have "+Math.log10(1/e.multipleOfValue)+" or fewer decimal places.":"Must be a multiple of "+e.multipleOfValue+"."},minProperties:"Must have {{minimumProperties}} or more items (current items: {{currentProperties}})",maxProperties:"Must have {{maximumProperties}} or fewer items (current items: {{currentProperties}})",minItems:"Must have {{minimumItems}} or more items (current items: {{currentItems}})",maxItems:"Must have {{maximumItems}} or fewer items (current items: {{currentItems}})",uniqueItems:"All items must be unique"},Be={required:"Este campo est requerido.",minLength:"Debe tener {{minimumLength}} caracteres o ms longitud (longitud actual: {{currentLength}})",maxLength:"Debe tener {{maximumLength}} caracteres o menos longitud (longitud actual: {{currentLength}})",pattern:"Must match pattern: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Debe tener una fecha, ej "2000-12-31"';case"time":return'Debe tener una hora, ej "16:20" o "03:14:15.9265"';case"date-time":return'Debe tener fecha y hora, ej "2000-03-14T01:59" o "2000-03-14T01:59:26.535Z"';case"email":return'No hay direccin de correo electrnico vlida, ej "name@example.com"';case"hostname":return'Debe ser un nombre de host vlido, ej "example.com"';case"ipv4":return'Debe ser una direccin de IPv4, ej "127.0.0.1"';case"ipv6":return'Debe ser una direccin de IPv6, ej "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Debe ser una URL, ej "http://www.example.com/page.html"';case"uuid":return'Debe ser un UUID, ej "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Debe ser un color, ej "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Debe ser un JSON Pointer, ej "/pointer/to/something"';case"relative-json-pointer":return'Debe ser un JSON Pointer relativo, ej "2/pointer/to/something"';case"regex":return'Debe ser una expresin regular, ej "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Debe tener el formato correcto "+e.requiredFormat}},minimum:"Debe ser {{minimumValue}} o ms",exclusiveMinimum:"Debe ser superior a {{exclusiveMinimumValue}}",maximum:"Debe ser {{maximumValue}} o menos",exclusiveMaximum:"Debe ser menor que {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Se permite un mximo de "+Math.log10(1/e.multipleOfValue)+" decimales":"Debe ser mltiplo de "+e.multipleOfValue+"."},minProperties:"Debe tener {{minimumProperties}} o ms elementos (elementos actuales: {{currentProperties}})",maxProperties:"Debe tener {{maximumProperties}} o menos elementos (elementos actuales: {{currentProperties}})",minItems:"Debe tener {{minimumItems}} o ms elementos (elementos actuales: {{currentItems}})",maxItems:"Debe tener {{maximumItems}} o menos elementos (elementos actuales: {{currentItems}})",uniqueItems:"Todos los elementos deben ser nicos"},He={required:"Est obligatoire.",minLength:"Doit avoir minimum {{minimumLength}} caractres (actuellement: {{currentLength}})",maxLength:"Doit avoir maximum {{maximumLength}} caractres (actuellement: {{currentLength}})",pattern:"Doit respecter: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Doit tre une date, tel que "2000-12-31"';case"time":return'Doit tre une heure, tel que "16:20" ou "03:14:15.9265"';case"date-time":return'Doit tre une date et une heure, tel que "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Doit tre une adresse e-mail, tel que "name@example.com"';case"hostname":return'Doit tre un nom de domaine, tel que "example.com"';case"ipv4":return'Doit tre une adresse IPv4, tel que "127.0.0.1"';case"ipv6":return'Doit tre une adresse IPv6, tel que "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Doit tre une URL, tel que "http://www.example.com/page.html"';case"uuid":return'Doit tre un UUID, tel que "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Doit tre une couleur, tel que "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Doit tre un JSON Pointer, tel que "/pointer/to/something"';case"relative-json-pointer":return'Doit tre un relative JSON Pointer, tel que "2/pointer/to/something"';case"regex":return'Doit tre une expression rgulire, tel que "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Doit tre avoir le format correct: "+e.requiredFormat}},minimum:"Doit tre suprieur  {{minimumValue}}",exclusiveMinimum:"Doit avoir minimum {{exclusiveMinimumValue}} charactres",maximum:"Doit tre infrieur  {{maximumValue}}",exclusiveMaximum:"Doit avoir maximum {{exclusiveMaximumValue}} charactres",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Doit comporter "+Math.log10(1/e.multipleOfValue)+" ou moins de decimales.":"Doit tre un multiple de "+e.multipleOfValue+"."},minProperties:"Doit comporter au minimum {{minimumProperties}} lments",maxProperties:"Doit comporter au maximum {{maximumProperties}} lments",minItems:"Doit comporter au minimum {{minimumItems}} lments",maxItems:"Doit comporter au maximum {{minimumItems}} lments",uniqueItems:"Tous les lments doivent tre uniques"},Ge={required:"Il campo  obbligatorio",minLength:"Deve inserire almeno {{minimumLength}} caratteri (lunghezza corrente: {{currentLength}})",maxLength:"Il numero massimo di caratteri consentito  {{maximumLength}} (lunghezza corrente: {{currentLength}})",pattern:"Devi rispettare il pattern : {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Deve essere una data, come "31-12-2000"';case"time":return'Deve essere un orario, come "16:20" o "03:14:15.9265"';case"date-time":return'Deve essere data-orario, come "14-03-2000T01:59" or "14-03-2000T01:59:26.535Z"';case"email":return'Deve essere un indirzzo email, come "name@example.com"';case"hostname":return'Deve essere un hostname, come "example.com"';case"ipv4":return'Deve essere un indirizzo IPv4, come "127.0.0.1"';case"ipv6":return'Deve essere un indirizzo IPv6, come "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Deve essere un url, come "http://www.example.com/page.html"';case"uuid":return'Deve essere un uuid, come "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Deve essere un colore, come "#FFFFFF" o "rgb(255, 255, 255)"';case"json-pointer":return'Deve essere un JSON Pointer, come "/pointer/to/something"';case"relative-json-pointer":return'Deve essere un JSON Pointer relativo, come "2/pointer/to/something"';case"regex":return'Deve essere una regular expression, come "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Deve essere formattato correttamente "+e.requiredFormat}},minimum:"Deve essere {{minimumValue}} o pi",exclusiveMinimum:"Deve essere pi di {{exclusiveMinimumValue}}",maximum:"Deve essere {{maximumValue}} o meno",exclusiveMaximum:"Deve essere minore di {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Deve avere "+Math.log10(1/e.multipleOfValue)+" o meno decimali.":"Deve essere multiplo di "+e.multipleOfValue+"."},minProperties:"Deve avere {{minimumProperties}} o pi elementi (elementi correnti: {{currentProperties}})",maxProperties:"Deve avere {{maximumProperties}} o meno elementi (elementi correnti: {{currentProperties}})",minItems:"Deve avere {{minimumItems}} o pi elementi (elementi correnti: {{currentItems}})",maxItems:"Deve avere {{maximumItems}} o meno elementi (elementi correnti: {{currentItems}})",uniqueItems:"Tutti gli elementi devono essere unici"},Ue={required:"Este campo  obrigatrio.",minLength:" preciso no mnimo {{minimumLength}} caracteres ou mais (tamanho atual: {{currentLength}})",maxLength:" preciso no mximo  {{maximumLength}} caracteres ou menos (tamanho atual: {{currentLength}})",pattern:"Tem que ajustar ao formato: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Tem que ser uma data, por exemplo "2000-12-31"';case"time":return'Tem que ser horrio, por exemplo "16:20" ou "03:14:15.9265"';case"date-time":return'Tem que ser data e hora, por exemplo "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Tem que ser um email, por exemplo "fulano@exemplo.com.br"';case"hostname":return'Tem que ser uma nome de domnio, por exemplo "exemplo.com.br"';case"ipv4":return'Tem que ser um endereo IPv4, por exemplo "127.0.0.1"';case"ipv6":return'Tem que ser um endereo IPv6, por exemplo "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Tem que ser uma URL, por exemplo "http://www.exemplo.com.br/pagina.html"';case"uuid":return'Tem que ser um uuid, por exemplo "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Tem que ser uma cor, por exemplo "#FFFFFF" ou "rgb(255, 255, 255)"';case"json-pointer":return'Tem que ser um JSON Pointer, por exemplo "/referencia/para/algo"';case"relative-json-pointer":return'Tem que ser um JSON Pointer relativo, por exemplo "2/referencia/para/algo"';case"regex":return'Tem que ser uma expresso regular, por exemplo "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Tem que ser no formato: "+e.requiredFormat}},minimum:"Tem que ser {{minimumValue}} ou mais",exclusiveMinimum:"Tem que ser mais que {{exclusiveMinimumValue}}",maximum:"Tem que ser {{maximumValue}} ou menos",exclusiveMaximum:"Tem que ser menor que {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Tem que ter "+Math.log10(1/e.multipleOfValue)+" ou menos casas decimais.":"Tem que ser um mltiplo de "+e.multipleOfValue+"."},minProperties:"Deve ter {{minimumProperties}} ou mais itens (itens at o momento: {{currentProperties}})",maxProperties:"Deve ter {{maximumProperties}} ou menos intens (itens at o momento: {{currentProperties}})",minItems:"Deve ter {{minimumItems}} ou mais itens (itens at o momento: {{currentItems}})",maxItems:"Deve ter {{maximumItems}} ou menos itens (itens at o momento: {{currentItems}})",uniqueItems:"Todos os itens devem ser nicos"},Ze={required:".",minLength:" {{minimumLength}} (: {{currentLength}})",maxLength:" {{maximumLength}} (: {{currentLength}})",pattern:": {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return',  "2000-12-31"';case"time":return',  "16:20"  "03:14:15.9265"';case"date-time":return',  "2000-03-14T01:59"  "2000-03-14T01:59:26.535Z"';case"email":return',  "name@example.com"';case"hostname":return',  "example.com"';case"ipv4":return' IPv4 ,  "127.0.0.1"';case"ipv6":return' IPv6 ,  "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return' url,  "http://www.example.com/page.html"';case"uuid":return' uuid,  "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return',  "#FFFFFF"  "rgb(255, 255, 255)"';case"json-pointer":return' JSON Pointer,  "/pointer/to/something"';case"relative-json-pointer":return' JSON Pointer,  "2/pointer/to/something"';case"regex":return',  "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return" "+e.requiredFormat}},minimum:": {{minimumValue}}",exclusiveMinimum:": {{exclusiveMinimumValue}}",maximum:": {{maximumValue}}",exclusiveMaximum:": {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?" "+Math.log10(1/e.multipleOfValue)+" ":" "+e.multipleOfValue+" "},minProperties:" {{minimumProperties}} (: {{currentProperties}})",maxProperties:" {{maximumProperties}} (: {{currentProperties}})",minItems:" {{minimumItems}} (: {{currentItems}})",maxItems:" {{maximumItems}} (: {{currentItems}})",uniqueItems:""},Ke=function(){function e(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.ajvOptions={allErrors:!0,jsonPointers:!0,unknownFormats:"ignore"},this.ajv=new y.default(this.ajvOptions),this.validateFormData=null,this.formValues={},this.data={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.validData=null,this.isValid=null,this.ajvErrors=null,this.validationErrors=null,this.dataErrors=new Map,this.formValueSubscription=null,this.dataChanges=new a.Subject,this.isValidChanges=new a.Subject,this.validationErrorChanges=new a.Subject,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.schemaRefLibrary={},this.layoutRefLibrary={"":null},this.templateRefLibrary={},this.hasRootReference=!1,this.language="en-US",this.defaultFormOptions={autocomplete:!0,addSubmit:"auto",debug:!1,disableInvalidSubmit:!0,formDisabled:!1,formReadonly:!1,fieldsRequired:!1,framework:"no-framework",loadExternalAssets:!1,pristine:{errors:!0,success:!0},supressPropertyTitles:!1,setSchemaDefaults:"auto",setLayoutDefaults:"auto",validateOnRender:"auto",widgets:{},defautWidgetOptions:{listItems:1,addable:!0,orderable:!0,removable:!0,enableErrorState:!0,enableSuccessState:!0,feedback:!1,feedbackOnRender:!1,notitle:!1,disabled:!1,readonly:!1,returnEmptyFields:!0,validationMessages:{}}},this.setLanguage(this.language),this.ajv.addMetaSchema(v.default)}return e.prototype.setLanguage=function(e){void 0===e&&(e="en-US"),this.language=e;var t={de:_e,en:Je,es:Be,fr:He,it:Ge,pt:Ue,zh:Ze}[e.slice(0,2)];this.defaultFormOptions.defautWidgetOptions.validationMessages=f.default(t)},e.prototype.getData=function(){return this.data},e.prototype.getSchema=function(){return this.schema},e.prototype.getLayout=function(){return this.layout},e.prototype.resetAllValues=function(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.validateFormData=null,this.formValues={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.data={},this.validData=null,this.isValid=null,this.validationErrors=null,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.layoutRefLibrary={},this.schemaRefLibrary={},this.templateRefLibrary={},this.formOptions=f.default(this.defaultFormOptions)},e.prototype.buildRemoteError=function(e){var t=this;ee(e,(function(e,r){var n,o;if(r in t.formGroup.controls)try{for(var i=F(e),a=i.next();!a.done;a=i.next()){var s=a.value,l={};l[s.code]=s.message,t.formGroup.get(r).setErrors(l,{emitEvent:!0})}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}))},e.prototype.validateData=function(e,t){void 0===t&&(t=!0),this.data=Se(e,this.dataMap,this.dataRecursiveRefMap,this.arrayMap,this.formOptions.returnEmptyFields),this.isValid=this.validateFormData(this.data),this.validData=this.isValid?this.data:null;var r,n;this.ajvErrors=this.validateFormData.errors,this.validationErrors=(r=this.validateFormData.errors,n={},(r||[]).forEach((function(e){n[e.dataPath]||(n[e.dataPath]=[]),n[e.dataPath].push(e.message)})),n),t&&(this.dataChanges.next(this.data),this.isValidChanges.next(this.isValid),this.validationErrorChanges.next(this.ajvErrors))},e.prototype.buildFormGroupTemplate=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),this.formGroupTemplate=Me(this,e,t)},e.prototype.buildFormGroup=function(){var e=this;this.formGroup=ke(this.formGroupTemplate),this.formGroup&&(this.compileAjvSchema(),this.validateData(this.formGroup.value),this.formValueSubscription&&this.formValueSubscription.unsubscribe(),this.formValueSubscription=this.formGroup.valueChanges.subscribe((function(t){return e.validateData(t)})))},e.prototype.buildLayout=function(e){this.layout=Le(this,e)},e.prototype.setOptions=function(e){if(q(e)){var t=f.default(e);q(t.defaultOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defaultOptions),delete t.defaultOptions),q(t.defautWidgetOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defautWidgetOptions),delete t.defautWidgetOptions),Object.assign(this.formOptions,t);var r=this.formOptions.defautWidgetOptions;["ErrorState","SuccessState"].filter((function(e){return re(r,"disable"+e)})).forEach((function(e){r["enable"+e]=!r["disable"+e],delete r["disable"+e]}))}},e.prototype.compileAjvSchema=function(){this.validateFormData||(Array.isArray(this.schema.properties["ui:order"])&&(this.schema["ui:order"]=this.schema.properties["ui:order"],delete this.schema.properties["ui:order"]),this.ajv.removeSchema(this.schema),this.validateFormData=this.ajv.compile(this.schema))},e.prototype.buildSchemaFromData=function(e,t){if(void 0===t&&(t=!1),e)return ye(e,t);this.schema=ye(this.formValues,t)},e.prototype.buildSchemaFromLayout=function(e){e||(this.schema=void this.layout)},e.prototype.setTpldata=function(e){void 0===e&&(e={}),this.tpldata=e},e.prototype.parseText=function(e,t,r,n){var o=this;return void 0===e&&(e=""),void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n=null),e&&/{{.+?}}/.test(e)?e.replace(/{{(.+?)}}/g,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return o.parseExpression(e[1],t,r,n,o.tpldata)})):e},e.prototype.parseExpression=function(e,t,r,n,o){var i=this;if(void 0===e&&(e=""),void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n=null),void 0===o&&(o=null),"string"!=typeof e)return"";var a="number"==typeof n?n+1+"":n||"";if(("'"===(e=e.trim())[0]||'"'===e[0])&&e[0]===e[e.length-1]&&-1===e.slice(1,e.length-1).indexOf(e[0]))return e.slice(1,e.length-1);if("idx"===e||"$index"===e)return a;if("value"===e&&!re(r,"value"))return t;if(['"',"'"," ","||","&&","+"].every((function(t){return-1===e.indexOf(t)}))){var s=ce.parseObjectPath(e);return"value"===s[0]&&ce.has(t,s.slice(1))?ce.get(t,s.slice(1)):"values"===s[0]&&ce.has(r,s.slice(1))?ce.get(r,s.slice(1)):"tpldata"===s[0]&&ce.has(o,s.slice(1))?ce.get(o,s.slice(1)):ce.has(r,s)?ce.get(r,s):""}return e.indexOf("[idx]")>-1&&(e=e.replace(/\[idx\]/g,a)),e.indexOf("[$index]")>-1&&(e=e.replace(/\[$index\]/g,a)),e.indexOf("||")>-1?e.split("||").reduce((function(e,a){return e||i.parseExpression(a,t,r,n,o)}),""):e.indexOf("&&")>-1?e.split("&&").reduce((function(e,a){return e&&i.parseExpression(a,t,r,n,o)})," ").trim():e.indexOf("+")>-1?e.split("+").map((function(e){return i.parseExpression(e,t,r,n,o)})).join(""):""},e.prototype.setArrayItemTitle=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=null),void 0===r&&(r=null);var n=e.layoutNode,o=this.getFormControlValue(e),i="array"===(n.type||"").slice(-5)&&R(o),a=ce.getFirst(i&&"$ref"!==t.type?[[t,"/options/legend"],[t,"/options/title"],[n,"/options/title"],[n,"/options/legend"]]:[[t,"/options/title"],[t,"/options/legend"],[n,"/options/title"],[n,"/options/legend"]]);if(!a)return a;var s=R(o)&&r<o.length?o[r]:o;return this.parseText(a,s,o,r)},e.prototype.setItemTitle=function(e){return!e.options.title&&/^(\d+|-)$/.test(e.layoutNode.name)?null:this.parseText(e.options.title||ue(e.layoutNode.name),this.getFormControlValue(this),(this.getFormControlGroup(this)||{}).value,e.dataIndex[e.dataIndex.length-1])},e.prototype.evaluateCondition=function(e,t){var r=t&&t[t.length-1],n=!0;if(S((e.options||{}).condition))if("string"==typeof e.options.condition){var o=e.options.condition;S(r)&&(o=o.replace("[arrayIndex]","["+r+"]")),o=ce.parseObjectPath(o),(n=!!ce.get(this.data,o))||"model"!==o[0]||(n=!!ce.get({model:this.data},o))}else if("function"==typeof e.options.condition)n=e.options.condition(this.data);else if("string"==typeof e.options.condition.functionBody)try{n=new Function("model","arrayIndices",e.options.condition.functionBody)(this.data,t)}catch(t){n=!0,console.error("condition functionBody errored out on evaluation: "+e.options.condition.functionBody)}return n},e.prototype.initializeControl=function(e,t){var r=this;if(void 0===t&&(t=!0),!q(e))return!1;if(V(e.options)&&(e.options=V((e.layoutNode||{}).options)?f.default(this.formOptions):e.layoutNode.options),e.formControl=this.getFormControl(e),e.boundControl=t&&!!e.formControl,e.formControl)e.controlName=this.getFormControlName(e),e.controlValue=e.formControl.value,e.controlDisabled=e.formControl.disabled,e.options.errorMessage="VALID"===e.formControl.status?null:this.formatErrors(e.formControl.errors,e.options.validationMessages),e.options.showErrors=!0===this.formOptions.validateOnRender||"auto"===this.formOptions.validateOnRender&&S(e.controlValue),e.formControl.statusChanges.subscribe((function(t){return e.options.errorMessage="VALID"===t?null:r.formatErrors(e.formControl.errors,e.options.validationMessages)})),e.formControl.valueChanges.subscribe((function(t){t&&(e.controlValue=t)}));else{e.controlName=e.layoutNode.name,e.controlValue=e.layoutNode.value||null;var n=this.getDataPointer(e);t&&n&&console.error('warning: control "'+n+'" is not bound to the Angular FormGroup.')}return e.boundControl},e.prototype.formatErrors=function(e,t){if(void 0===t&&(t={}),V(e))return null;q(t)||(t={});var r=function(e){return e[0].toUpperCase()+(e.slice(1)||"").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},n=function(e){return"object"==typeof e?Object.keys(e).map((function(t){return!0===e[t]?r(t):!1===e[t]?"Not "+r(t):r(t)+": "+n(e[t])})).join(", "):r(e.toString())};return Object.keys(e).filter((function(t){return"required"!==t||1===Object.keys(e).length})).map((function(o){return"string"==typeof t?t:"function"==typeof t[o]?t[o](e[o]):"string"==typeof t[o]?/{{.+?}}/.test(t[o])?Object.keys(e[o]).reduce((function(t,r){return t.replace(new RegExp("{{"+r+"}}","g"),e[o][r])}),t[o]):t[o]:r(o)+" Error: "+n(e[o])})).join("<br>")},e.prototype.updateValue=function(e,t){var r,n;if(e.controlValue=t,e.boundControl&&(e.formControl.setValue(t),e.formControl.markAsDirty()),e.layoutNode.value=t,R(e.options.copyValueTo))try{for(var o=F(e.options.copyValueTo),i=o.next();!i.done;i=o.next()){var a=i.value,s=Ve(this.formGroup,a);q(s)&&"function"==typeof s.setValue&&(s.setValue(t),s.markAsDirty())}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.updateArrayCheckboxList=function(e,t){for(var r,n,o=this.getFormControl(e);o.value.length;)o.removeAt(0);var i=ge(e.layoutNode.dataPointer+"/-",this.dataRecursiveRefMap,this.arrayMap);try{for(var a=F(t),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.checked){var u=ke(this.templateRefLibrary[i]);u.setValue(l.value),o.push(u)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}o.markAsDirty()},e.prototype.getFormControl=function(e){return e.layoutNode&&N(e.layoutNode.dataPointer)&&"$ref"!==e.layoutNode.type?Ve(this.formGroup,this.getDataPointer(e)):null},e.prototype.getFormControlValue=function(e){if(!e.layoutNode||!N(e.layoutNode.dataPointer)||"$ref"===e.layoutNode.type)return null;var t=Ve(this.formGroup,this.getDataPointer(e));return t?t.value:null},e.prototype.getFormControlGroup=function(e){return e.layoutNode&&N(e.layoutNode.dataPointer)?Ve(this.formGroup,this.getDataPointer(e),!0):null},e.prototype.getFormControlName=function(e){return e.layoutNode&&N(e.layoutNode.dataPointer)&&S(e.dataIndex)?ce.toKey(this.getDataPointer(e)):null},e.prototype.getLayoutArray=function(e){return ce.get(this.layout,this.getLayoutPointer(e),0,-1)},e.prototype.getParentNode=function(e){return ce.get(this.layout,this.getLayoutPointer(e),0,-2)},e.prototype.getDataPointer=function(e){return e.layoutNode&&N(e.layoutNode.dataPointer)&&S(e.dataIndex)?ce.toIndexedPointer(e.layoutNode.dataPointer,e.dataIndex,this.arrayMap):null},e.prototype.getLayoutPointer=function(e){return S(e.layoutIndex)?"/"+e.layoutIndex.join("/items/"):null},e.prototype.isControlBound=function(e){if(!e.layoutNode||!N(e.layoutNode.dataPointer)||!S(e.dataIndex))return!1;var t=this.getFormControlGroup(e),r=this.getFormControlName(e);return!!t&&re(t.controls,r)},e.prototype.addItem=function(e,t){if(!(e.layoutNode&&N(e.layoutNode.$ref)&&S(e.dataIndex)&&S(e.layoutIndex)))return!1;var r=ke(this.templateRefLibrary[e.layoutNode.$ref]);e.layoutNode.arrayItem?this.getFormControlGroup(e).push(r):this.getFormControlGroup(e).addControl(t||this.getFormControlName(e),r);var n=Te(e.layoutNode,this);return n.arrayItem=e.layoutNode.arrayItem,e.layoutNode.arrayItemType?n.arrayItemType=e.layoutNode.arrayItemType:delete n.arrayItemType,t&&(n.name=t,n.dataPointer+="/"+ce.escape(t),n.options.title=le(t)),ce.insert(this.layout,this.getLayoutPointer(e),n),!0},e.prototype.moveArrayItem=function(e,t,r){if(!(e.layoutNode&&N(e.layoutNode.dataPointer)&&S(e.dataIndex)&&S(e.layoutIndex)&&N(t)&&N(r)&&t!==r))return!1;var n=this.getFormControlGroup(e),o=n.at(t);n.removeAt(t),n.insert(r,o),n.updateValueAndValidity();var i=this.getLayoutArray(e);return i.splice(r,0,i.splice(t,1)[0]),!0},e.prototype.removeItem=function(e){return!!(e.layoutNode&&N(e.layoutNode.dataPointer)&&S(e.dataIndex)&&S(e.layoutIndex))&&(e.layoutNode.arrayItem?this.getFormControlGroup(e).removeAt(e.dataIndex[e.dataIndex.length-1]):this.getFormControlGroup(e).removeControl(this.getFormControlName(e)),ce.remove(this.layout,this.getLayoutPointer(e)),!0)},e}();Ke.prov=n.defineInjectable({factory:function(){return new Ke},token:Ke,providedIn:"root"}),Ke.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Ke.ctorParameters=function(){return[]};var Ye=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},Object.defineProperty(e.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!1,configurable:!0}),e.prototype.addItem=function(e){e.preventDefault(),this.jsf.addItem(this)},Object.defineProperty(e.prototype,"buttonText",{get:function(){var e={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return e.layoutNode.add||this.jsf.setArrayItemTitle(e,this.layoutNode,this.itemCount)},enumerable:!1,configurable:!0}),e}();Ye.decorators=[{type:n.Component,args:[{selector:"add-reference-widget",template:'\n    <button *ngIf="showAddButton"\n      [class]="options?.fieldHtmlClass || \'\'"\n      [disabled]="options?.readonly"\n      (click)="addItem($event)">\n      <span *ngIf="options?.icon" [class]="options?.icon"></span>\n      <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n    </button>',changeDetection:n.ChangeDetectionStrategy.Default}]}],Ye.ctorParameters=function(){return[{type:Ke}]},Ye.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var Qe=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e}();Qe.decorators=[{type:n.Component,args:[{selector:"button-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <button\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n        <span *ngIf="options?.icon || options?.title"\n          [class]="options?.icon"\n          [innerHTML]="options?.title"></span>\n      </button>\n    </div>'}]}],Qe.ctorParameters=function(){return[{type:Ke}]},Qe.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var Xe=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){e.preventDefault(),this.jsf.updateValue(this,e.target.checked?this.trueValue:this.falseValue)},Object.defineProperty(e.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!1,configurable:!0}),e}();Xe.decorators=[{type:n.Component,args:[{selector:"checkbox-widget",template:"\n    <label\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.itemLabelHtmlClass || ''\">\n      <input *ngIf=\"boundControl\"\n        [formControl]=\"formControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        type=\"checkbox\">\n      <input *ngIf=\"!boundControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [checked]=\"isChecked ? 'checked' : null\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [disabled]=\"controlDisabled\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        [value]=\"controlValue\"\n        type=\"checkbox\"\n        (change)=\"updateValue($event)\">\n      <span *ngIf=\"options?.title\"\n        [style.display]=\"options?.notitle ? 'none' : ''\"\n        [innerHTML]=\"options?.title\"></span>\n    </label>"}]}],Xe.ctorParameters=function(){return[{type:Ke}]},Xe.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var et=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.checkboxList=[]}return e.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.layoutOrientation="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type?"horizontal":"vertical",this.jsf.initializeControl(this),this.checkboxList=qe(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.boundControl){var e=this.jsf.getFormControl(this);this.checkboxList.forEach((function(t){return t.checked=e.value.includes(t.value)}))}},e.prototype.updateValue=function(e){var t,r;try{for(var n=F(this.checkboxList),o=n.next();!o.done;o=n.next()){var i=o.value;e.target.value===i.value&&(i.checked=e.target.checked)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},e}();et.decorators=[{type:n.Component,args:[{selector:"checkboxes-widget",template:'\n    <label *ngIf="options?.title"\n      [class]="options?.labelHtmlClass || \'\'"\n      [style.display]="options?.notitle ? \'none\' : \'\'"\n      [innerHTML]="options?.title"></label>\n\n    \x3c!-- \'horizontal\' = checkboxes-inline or checkboxbuttons --\x3e\n    <div *ngIf="layoutOrientation === \'horizontal\'" [class]="options?.htmlClass || \'\'">\n      <label *ngFor="let checkboxItem of checkboxList"\n        [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n        [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n          (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n          (\' \' + (options?.style?.unselected || \'\')))">\n        <input type="checkbox"\n          [attr.required]="options?.required"\n          [checked]="checkboxItem.checked"\n          [class]="options?.fieldHtmlClass || \'\'"\n          [disabled]="controlDisabled"\n          [id]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [name]="checkboxItem?.name"\n          [readonly]="options?.readonly ? \'readonly\' : null"\n          [value]="checkboxItem.value"\n          (change)="updateValue($event)">\n        <span [innerHTML]="checkboxItem.name"></span>\n      </label>\n    </div>\n\n    \x3c!-- \'vertical\' = regular checkboxes --\x3e\n    <div *ngIf="layoutOrientation === \'vertical\'">\n      <div *ngFor="let checkboxItem of checkboxList" [class]="options?.htmlClass || \'\'">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n            (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n            (\' \' + (options?.style?.unselected || \'\')))">\n          <input type="checkbox"\n            [attr.required]="options?.required"\n            [checked]="checkboxItem.checked"\n            [class]="options?.fieldHtmlClass || \'\'"\n            [disabled]="controlDisabled"\n            [id]="options?.name + \'/\' + checkboxItem.value"\n            [name]="checkboxItem?.name"\n            [readonly]="options?.readonly ? \'readonly\' : null"\n            [value]="checkboxItem.value"\n            (change)="updateValue($event)">\n          <span [innerHTML]="checkboxItem?.name"></span>\n        </label>\n      </div>\n    </div>'}]}],et.ctorParameters=function(){return[{type:Ke}]},et.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var tt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();tt.decorators=[{type:n.Component,args:[{selector:"file-widget",template:""}]}],tt.ctorParameters=function(){return[{type:Ke}]},tt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var rt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();rt.decorators=[{type:n.Component,args:[{selector:"input-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n        <datalist *ngIf="options?.typeahead?.source"\n          [id]="\'control\' + layoutNode?._id + \'Autocomplete\'">\n          <option *ngFor="let word of options?.typeahead?.source" [value]="word">\n        </datalist>\n    </div>'}]}],rt.ctorParameters=function(){return[{type:Ke}]},rt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var nt=function(){function e(e){this.jsf=e,this.message=null}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.message=this.options.help||this.options.helpvalue||this.options.msg||this.options.message},e}();nt.decorators=[{type:n.Component,args:[{selector:"message-widget",template:'\n    <span *ngIf="message"\n      [class]="options?.labelHtmlClass || \'\'"\n      [innerHTML]="message"></span>'}]}],nt.ctorParameters=function(){return[{type:Ke}]},nt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var ot=function(){};ot.decorators=[{type:n.Component,args:[{selector:"none-widget",template:""}]}],ot.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var it=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();it.decorators=[{type:n.Component,args:[{selector:"number-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n      <span *ngIf="layoutNode?.type === \'range\'" [innerHTML]="controlValue"></span>\n    </div>'}]}],it.ctorParameters=function(){return[{type:Ke}]},it.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var at=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();at.decorators=[{type:n.Component,args:[{selector:"one-of-widget",template:""}]}],at.ctorParameters=function(){return[{type:Ke}]},at.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var st=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.layoutOrientation="vertical",this.radiosList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"!==this.layoutNode.type&&"radiobuttons"!==this.layoutNode.type||(this.layoutOrientation="horizontal"),this.radiosList=qe(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();st.decorators=[{type:n.Component,args:[{selector:"radios-widget",template:"\n    <label *ngIf=\"options?.title\"\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.labelHtmlClass || ''\"\n      [style.display]=\"options?.notitle ? 'none' : ''\"\n      [innerHTML]=\"options?.title\"></label>\n\n    \x3c!-- 'horizontal' = radios-inline or radiobuttons --\x3e\n    <div *ngIf=\"layoutOrientation === 'horizontal'\"\n      [class]=\"options?.htmlClass || ''\">\n      <label *ngFor=\"let radioItem of radiosList\"\n        [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n        [class]=\"(options?.itemLabelHtmlClass || '') +\n          ((controlValue + '' === radioItem?.value + '') ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\">\n        <input type=\"radio\"\n          [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n          [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n          [attr.required]=\"options?.required\"\n          [checked]=\"radioItem?.value === controlValue\"\n          [class]=\"options?.fieldHtmlClass || ''\"\n          [disabled]=\"controlDisabled\"\n          [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [name]=\"controlName\"\n          [value]=\"radioItem?.value\"\n          (change)=\"updateValue($event)\">\n        <span [innerHTML]=\"radioItem?.name\"></span>\n      </label>\n    </div>\n\n    \x3c!-- 'vertical' = regular radios --\x3e\n    <div *ngIf=\"layoutOrientation !== 'horizontal'\">\n      <div *ngFor=\"let radioItem of radiosList\"\n        [class]=\"options?.htmlClass || ''\">\n        <label\n          [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [class]=\"(options?.itemLabelHtmlClass || '') +\n            ((controlValue + '' === radioItem?.value + '') ?\n            (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n            (' ' + (options?.style?.unselected || '')))\">\n          <input type=\"radio\"\n            [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n            [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n            [attr.required]=\"options?.required\"\n            [checked]=\"radioItem?.value === controlValue\"\n            [class]=\"options?.fieldHtmlClass || ''\"\n            [disabled]=\"controlDisabled\"\n            [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n            [name]=\"controlName\"\n            [value]=\"radioItem?.value\"\n            (change)=\"updateValue($event)\">\n          <span [innerHTML]=\"radioItem?.name\"></span>\n        </label>\n      </div>\n    </div>"}]}],st.ctorParameters=function(){return[{type:Ke}]},st.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var lt=function(){function e(e){this.jsf=e,this.isFlexItem=!1}return e.prototype.isDraggable=function(e){return e.arrayItem&&"$ref"!==e.type&&"list"===e.arrayItemType&&!1!==this.isOrderable},e.prototype.getFlexAttribute=function(e,t){var r=["flex-grow","flex-shrink","flex-basis"].indexOf(t);return((e.options||{}).flex||"").split(/\s+/)[r]||(e.options||{})[t]||["1","1","auto"][r]},e.prototype.showWidget=function(e){return this.jsf.evaluateCondition(e,this.dataIndex)},e}();lt.decorators=[{type:n.Component,args:[{selector:"root-widget",template:'\n    <div *ngFor="let layoutItem of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.align-self]="(layoutItem.options || {})[\'align-self\']"\n      [style.flex-basis]="getFlexAttribute(layoutItem, \'flex-basis\')"\n      [style.flex-grow]="getFlexAttribute(layoutItem, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutItem, \'flex-shrink\')"\n      [style.order]="(layoutItem.options || {}).order">\n      <div\n        [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"\n        [orderable]="isDraggable(layoutItem)">\n        <select-framework-widget *ngIf="showWidget(layoutItem)"\n          [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n          [layoutIndex]="(layoutIndex || []).concat(i)"\n          [layoutNode]="layoutItem"></select-framework-widget>\n      </div>\n    </div>',styles:["\n    [draggable=true] {\n      transition: all 150ms cubic-bezier(.4, 0, .2, 1);\n    }\n    [draggable=true]:hover {\n      cursor: move;\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n      position: relative; z-index: 10;\n      margin-top: -1px;\n      margin-left: -1px;\n      margin-right: 1px;\n      margin-bottom: 1px;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],lt.ctorParameters=function(){return[{type:Ke}]},lt.propDecorators={dataIndex:[{type:n.Input}],layoutIndex:[{type:n.Input}],layout:[{type:n.Input}],isOrderable:[{type:n.Input}],isFlexItem:[{type:n.Input}]};var ut=function(){function e(e){this.jsf=e,this.expanded=!0}return Object.defineProperty(e.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"fieldset":case"array":case"tab":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;default:this.containerType="div"}},e.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},e.prototype.getFlexAttribute=function(e){var t="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;if("flex"!==e&&!t)return null;switch(e){case"is-flex":return t;case"display":return t?"flex":"initial";case"flex-direction":case"flex-wrap":var r=["flex-direction","flex-wrap"].indexOf(e);return(this.options["flex-flow"]||"").split(/\s+/)[r]||this.options[e]||["column","nowrap"][r];case"justify-content":case"align-items":case"align-content":return this.options[e]}},e}();ut.decorators=[{type:n.Component,args:[{selector:"section-widget",template:'\n    <div *ngIf="containerType === \'div\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <label *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></label>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n    </div>\n    <fieldset *ngIf="containerType === \'fieldset\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded"\n      [disabled]="options?.readonly">\n      <legend *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></legend>\n      <div *ngIf="options?.messageLocation !== \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n      <div *ngIf="options?.messageLocation === \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n    </fieldset>',styles:["\n    .legend { font-weight: bold; }\n    .expandable > legend:before, .expandable > label:before  { content: ''; padding-right: .3em; }\n    .expanded > legend:before, .expanded > label:before  { content: ''; padding-right: .2em; }\n  "]}]}],ut.ctorParameters=function(){return[{type:Ke}]},ut.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var dt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=R}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=qe(this.options.titleMap||this.options.enumNames,this.options.enum,!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();dt.decorators=[{type:n.Component,args:[{selector:"select-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n      <select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        (change)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n    </div>'}]}],dt.ctorParameters=function(){return[{type:Ke}]},dt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var ct=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&this.jsf.framework&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.jsf.framework))),this.newComponent)try{for(var r=F(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e}();ct.decorators=[{type:n.Component,args:[{selector:"select-framework-widget",template:"<div #widgetContainer></div>"}]}],ct.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:Ke}]},ct.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]};var pt=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&(this.layoutNode||{}).widget&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.widget))),this.newComponent)try{for(var r=F(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e}();pt.decorators=[{type:n.Component,args:[{selector:"select-widget-widget",template:"<div #widgetContainer></div>"}]}],pt.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:Ke}]},pt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]};var mt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){var e=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),re(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe((function(t){return e.controlDisabled=!t}))),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e}();mt.decorators=[{type:n.Component,args:[{selector:"submit-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <input\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n    </div>'}]}],mt.ctorParameters=function(){return[{type:Ke}]},mt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var ft=function(){function e(e){this.jsf=e,this.selectedItem=0,this.showAddTab=!0}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},e.prototype.select=function(e){"$ref"===this.layoutNode.items[e].type&&(this.itemCount=this.layoutNode.items.length,this.jsf.addItem({layoutNode:this.layoutNode.items[e],layoutIndex:this.layoutIndex.concat(e),dataIndex:this.dataIndex.concat(e)}),this.updateControl()),this.selectedItem=e},e.prototype.updateControl=function(){var e=this.layoutNode.items[this.layoutNode.items.length-1];"$ref"===e.type&&this.itemCount>=(e.options.maxItems||1e3)&&(this.showAddTab=!1)},e.prototype.setTabTitle=function(e,t){return this.jsf.setArrayItemTitle(this,e,t)},e}();ft.decorators=[{type:n.Component,args:[{selector:"tabs-widget",template:"\n    <ul\n      [class]=\"options?.labelHtmlClass || ''\">\n      <li *ngFor=\"let item of layoutNode?.items; let i = index\"\n        [class]=\"(options?.itemLabelHtmlClass || '') + (selectedItem === i ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + options?.style?.unselected))\"\n        role=\"presentation\"\n        data-tabs>\n        <a *ngIf=\"showAddTab || item.type !== '$ref'\"\n           [class]=\"'nav-link' + (selectedItem === i ? (' ' + options?.activeClass + ' ' + options?.style?.selected) :\n            (' ' + options?.style?.unselected))\"\n          [innerHTML]=\"setTabTitle(item, i)\"\n          (click)=\"select(i)\"></a>\n      </li>\n    </ul>\n\n    <div *ngFor=\"let layoutItem of layoutNode?.items; let i = index\"\n      [class]=\"options?.htmlClass || ''\">\n\n      <select-framework-widget *ngIf=\"selectedItem === i\"\n        [class]=\"(options?.fieldHtmlClass || '') +\n          ' ' + (options?.activeClass || '') +\n          ' ' + (options?.style?.selected || '')\"\n        [dataIndex]=\"layoutNode?.dataType === 'array' ? (dataIndex || []).concat(i) : dataIndex\"\n        [layoutIndex]=\"(layoutIndex || []).concat(i)\"\n        [layoutNode]=\"layoutItem\"></select-framework-widget>\n\n    </div>",styles:[" a { cursor: pointer; } "]}]}],ft.ctorParameters=function(){return[{type:Ke}]},ft.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var ht=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&this.layoutNode.options.template&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.options.template))),this.newComponent)try{for(var r=F(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e}();ht.decorators=[{type:n.Component,args:[{selector:"template-widget",template:"<div #widgetContainer></div>"}]}],ht.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:Ke}]},ht.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]};var yt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();yt.decorators=[{type:n.Component,args:[{selector:"textarea-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <textarea *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"></textarea>\n      <textarea *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [value]="controlValue"\n        (input)="updateValue($event)">{{controlValue}}</textarea>\n    </div>'}]}],yt.ctorParameters=function(){return[{type:Ke}]},yt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var vt=function(){function e(){this.defaultWidget="text",this.widgetLibrary={none:ot,root:lt,"select-framework":ct,"select-widget":pt,$ref:Ye,email:"text",integer:"number",number:it,password:"text",search:"text",tel:"text",text:rt,url:"text",color:"text",date:"text",datetime:"text","datetime-local":"text",month:"text",range:"number",time:"text",week:"text",checkbox:Xe,file:tt,hidden:"text",image:"text",radio:"radios",reset:"submit",submit:mt,button:Qe,select:dt,textarea:yt,checkboxes:et,"checkboxes-inline":"checkboxes",checkboxbuttons:"checkboxes",radios:st,"radios-inline":"radios",radiobuttons:"radios",section:ut,div:"section",fieldset:"section",flex:"section","one-of":at,array:"section",tabarray:"tabs",tab:"section",tabs:ft,message:nt,help:"message",msg:"message",html:"message",template:ht,advancedfieldset:"section",authfieldset:"section",optionfieldset:"one-of",selectfieldset:"one-of",conditional:"section",actions:"section",tagsinput:"section",updown:"number","date-time":"datetime-local","alt-datetime":"datetime-local","alt-date":"date",wizard:"section",textline:"text"},this.registeredWidgets={},this.frameworkWidgets={},this.activeWidgets={},this.setActiveWidgets()}return e.prototype.setActiveWidgets=function(){var e,t;this.activeWidgets=Object.assign({},this.widgetLibrary,this.frameworkWidgets,this.registeredWidgets);try{for(var r=F(Object.keys(this.activeWidgets)),n=r.next();!n.done;n=r.next()){var o=n.value,i=this.activeWidgets[o];if("string"==typeof i){for(var a=[];"string"==typeof i&&!a.includes(i);)a.push(i),i=this.activeWidgets[i];"string"!=typeof i&&(this.activeWidgets[o]=i)}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!0},e.prototype.setDefaultWidget=function(e){return!!this.hasWidget(e)&&(this.defaultWidget=e,!0)},e.prototype.hasWidget=function(e,t){return void 0===t&&(t="activeWidgets"),!(!e||"string"!=typeof e)&&re(this[t],e)},e.prototype.hasDefaultWidget=function(e){return this.hasWidget(e,"widgetLibrary")},e.prototype.registerWidget=function(e,t){return!(!e||!t||"string"!=typeof e)&&(this.registeredWidgets[e]=t,this.setActiveWidgets())},e.prototype.unRegisterWidget=function(e){return!!re(this.registeredWidgets,e)&&(delete this.registeredWidgets[e],this.setActiveWidgets())},e.prototype.unRegisterAllWidgets=function(e){return void 0===e&&(e=!0),this.registeredWidgets={},e&&(this.frameworkWidgets={}),this.setActiveWidgets()},e.prototype.registerFrameworkWidgets=function(e){return null!==e&&"object"==typeof e||(e={}),this.frameworkWidgets=e,this.setActiveWidgets()},e.prototype.unRegisterFrameworkWidgets=function(){return!!Object.keys(this.frameworkWidgets).length&&(this.frameworkWidgets={},this.setActiveWidgets())},e.prototype.getWidget=function(e,t){return void 0===t&&(t="activeWidgets"),this.hasWidget(e,t)?this[t][e]:this.hasWidget(this.defaultWidget,t)?this[t][this.defaultWidget]:null},e.prototype.getAllWidgets=function(){return{widgetLibrary:this.widgetLibrary,registeredWidgets:this.registeredWidgets,frameworkWidgets:this.frameworkWidgets,activeWidgets:this.activeWidgets}},e}();vt.prov=n.defineInjectable({factory:function(){return new vt},token:vt,providedIn:"root"}),vt.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],vt.ctorParameters=function(){return[]};var gt=function(){function e(e,t){var r=this;this.frameworks=e,this.widgetLibrary=t,this.activeFramework=null,this.loadExternalAssets=!1,this.frameworkLibrary={},this.frameworks.forEach((function(e){return r.frameworkLibrary[e.name]=e})),this.defaultFramework=this.frameworks[0].name,this.setFramework(this.defaultFramework)}return e.prototype.setLoadExternalAssets=function(e){void 0===e&&(e=!0),this.loadExternalAssets=!!e},e.prototype.setFramework=function(e,t){return void 0===e&&(e=this.defaultFramework),void 0===t&&(t=this.loadExternalAssets),this.activeFramework="string"==typeof e&&this.hasFramework(e)?this.frameworkLibrary[e]:"object"==typeof e&&re(e,"framework")?e:this.frameworkLibrary[this.defaultFramework],this.registerFrameworkWidgets(this.activeFramework)},e.prototype.registerFrameworkWidgets=function(e){return re(e,"widgets")?this.widgetLibrary.registerFrameworkWidgets(e.widgets):this.widgetLibrary.unRegisterFrameworkWidgets()},e.prototype.hasFramework=function(e){return re(this.frameworkLibrary,e)},e.prototype.getFramework=function(){return this.activeFramework||this.setFramework("default",!0),this.activeFramework.framework},e.prototype.getFrameworkWidgets=function(){return this.activeFramework.widgets||{}},e.prototype.getFrameworkStylesheets=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.stylesheets||[]},e.prototype.getFrameworkScripts=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.scripts||[]},e}();gt.prov=n.defineInjectable({factory:function(){return new gt(n.inject(de),n.inject(vt))},token:gt,providedIn:"root"}),gt.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],gt.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[de]}]},{type:vt,decorators:[{type:n.Inject,args:[vt]}]}]};var bt=function(){function e(e,t,r,o){this.changeDetector=e,this.frameworkLibrary=t,this.widgetLibrary=r,this.jsf=o,this.formValueSubscription=null,this.formInitialized=!1,this.objectWrap=!1,this.previousInputs={schema:null,layout:null,data:null,options:null,framework:null,widgets:null,form:null,model:null,JSONSchema:null,UISchema:null,formData:null,loadExternalAssets:null,debug:null},this.onChanges=new n.EventEmitter,this.onSubmit=new n.EventEmitter,this.isValid=new n.EventEmitter,this.validationErrors=new n.EventEmitter,this.formSchema=new n.EventEmitter,this.formLayout=new n.EventEmitter,this.dataChange=new n.EventEmitter,this.modelChange=new n.EventEmitter,this.formDataChange=new n.EventEmitter,this.ngModelChange=new n.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this.objectWrap?this.jsf.data[1]:this.jsf.data},set:function(e){this.setFormValues(e,!1)},enumerable:!1,configurable:!0}),e.prototype.resetScriptsAndStyleSheets=function(){document.querySelectorAll(".ajsf").forEach((function(e){return e.remove()}))},e.prototype.loadScripts=function(){this.frameworkLibrary.getFrameworkScripts().map((function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",t.async=!0,t.setAttribute("class","ajsf"),document.getElementsByTagName("head")[0].appendChild(t)}))},e.prototype.loadStyleSheets=function(){this.frameworkLibrary.getFrameworkStylesheets().map((function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,t.setAttribute("class","ajsf"),document.getElementsByTagName("head")[0].appendChild(t)}))},e.prototype.loadAssets=function(){this.resetScriptsAndStyleSheets(),this.loadScripts(),this.loadStyleSheets()},e.prototype.ngOnInit=function(){this.updateForm(),this.loadAssets()},e.prototype.ngOnChanges=function(e){this.updateForm(),e.framework&&(e.framework.isFirstChange()||e.framework.previousValue===e.framework.currentValue||this.loadAssets())},e.prototype.writeValue=function(e){this.setFormValues(e,!1),this.formValuesInput||(this.formValuesInput="ngModel")},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.jsf.formOptions.formDisabled!==!!e&&(this.jsf.formOptions.formDisabled=!!e,this.initializeForm())},e.prototype.updateForm=function(){var e=this;if(!this.formInitialized||!this.formValuesInput||this.language&&this.language!==this.jsf.language)this.initializeForm();else{this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language);var t=Object.keys(this.previousInputs).filter((function(t){return e.previousInputs[t]!==e[t]})),r=!0;if(1===t.length&&"form"===t[0]&&this.formValuesInput.startsWith("form.")&&(t=Object.keys(this.previousInputs.form||{}).filter((function(t){return!h.default(e.previousInputs.form[t],e.form[t])})).map((function(e){return"form."+e})),r=!1),1===t.length&&t[0]===this.formValuesInput)if(-1===this.formValuesInput.indexOf("."))this.setFormValues(this[this.formValuesInput],r);else{var n=j(this.formValuesInput.split("."),2),o=n[0],i=n[1];this.setFormValues(this[o][i],r)}else t.length&&(this.initializeForm(),this.onChange&&this.onChange(this.jsf.formValues),this.onTouched&&this.onTouched(this.jsf.formValues));Object.keys(this.previousInputs).filter((function(t){return e.previousInputs[t]!==e[t]})).forEach((function(t){return e.previousInputs[t]=e[t]}))}},e.prototype.setFormValues=function(e,t){if(void 0===t&&(t=!0),e){var r=this.objectWrap?e[1]:e;this.jsf.formGroup?t&&this.jsf.formGroup.reset():(this.jsf.formValues=e,this.activateForm()),this.jsf.formGroup&&this.jsf.formGroup.patchValue(r),this.onChange&&this.onChange(r),this.onTouched&&this.onTouched(r)}else this.jsf.formGroup.reset()},e.prototype.submitForm=function(){var e=this.jsf.validData;this.onSubmit.emit(this.objectWrap?e[1]:e)},e.prototype.initializeForm=function(){if(this.schema||this.layout||this.data||this.form||this.model||this.JSONSchema||this.UISchema||this.formData||this.ngModel||this.jsf.data){if(this.jsf.resetAllValues(),this.initializeOptions(),this.initializeSchema(),this.initializeLayout(),this.initializeData(),this.activateForm(),this.debug||this.jsf.formOptions.debug){this.debugOutput=[].map((function(e){return JSON.stringify(e,null,2)})).join("\n")}this.formInitialized=!0}},e.prototype.initializeOptions=function(){var e,t;this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language),this.jsf.setOptions({debug:!!this.debug});var r=this.loadExternalAssets||!1,n=this.framework||"default";if(q(this.options)&&(this.jsf.setOptions(this.options),r=this.options.loadExternalAssets||r,n=this.options.framework||n),q(this.form)&&q(this.form.options)&&(this.jsf.setOptions(this.form.options),r=this.form.options.loadExternalAssets||r,n=this.form.options.framework||n),q(this.widgets)&&this.jsf.setOptions({widgets:this.widgets}),this.frameworkLibrary.setLoadExternalAssets(r),this.frameworkLibrary.setFramework(n),this.jsf.framework=this.frameworkLibrary.getFramework(),q(this.jsf.formOptions.widgets))try{for(var o=F(Object.keys(this.jsf.formOptions.widgets)),i=o.next();!i.done;i=o.next()){var a=i.value;this.widgetLibrary.registerWidget(a,this.jsf.formOptions.widgets[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}q(this.form)&&q(this.form.tpldata)&&this.jsf.setTpldata(this.form.tpldata)},e.prototype.initializeSchema=function(){q(this.schema)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.schema=f.default(this.schema)):re(this.form,"schema")&&q(this.form.schema)?this.jsf.schema=f.default(this.form.schema):q(this.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=f.default(this.JSONSchema)):re(this.form,"JSONSchema")&&q(this.form.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=f.default(this.form.JSONSchema)):re(this.form,"properties")&&q(this.form.properties)?this.jsf.schema=f.default(this.form):q(this.form),V(this.jsf.schema)||(Y("object",this.jsf.schema.type)&&(this.jsf.schema.type="object"),re(this.jsf.schema,"type")&&"object"!==this.jsf.schema.type?(this.jsf.schema={type:"object",properties:{1:this.jsf.schema}},this.objectWrap=!0):re(this.jsf.schema,"type")||(q(this.jsf.schema.properties)||q(this.jsf.schema.patternProperties)||q(this.jsf.schema.additionalProperties)?this.jsf.schema.type="object":(this.jsf.JsonFormCompatibility=!0,this.jsf.schema={type:"object",properties:this.jsf.schema})),this.jsf.schema=O(this.jsf.schema),this.jsf.compileAjvSchema(),this.jsf.schema=we(this.jsf.schema,this.jsf.schemaRefLibrary,this.jsf.schemaRecursiveRefMap,this.jsf.dataRecursiveRefMap,this.jsf.arrayMap),re(this.jsf.schemaRefLibrary,"")&&(this.jsf.hasRootReference=!0))},e.prototype.initializeData=function(){S(this.data)?(this.jsf.formValues=f.default(this.data),this.formValuesInput="data"):S(this.model)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=f.default(this.model),this.formValuesInput="model"):S(this.ngModel)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=f.default(this.ngModel),this.formValuesInput="ngModel"):q(this.form)&&S(this.form.value)?(this.jsf.JsonFormCompatibility=!0,this.jsf.formValues=f.default(this.form.value),this.formValuesInput="form.value"):q(this.form)&&S(this.form.data)?(this.jsf.formValues=f.default(this.form.data),this.formValuesInput="form.data"):S(this.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.formValuesInput="formData"):re(this.form,"formData")&&S(this.form.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.formValues=f.default(this.form.formData),this.formValuesInput="form.formData"):this.formValuesInput=null},e.prototype.initializeLayout=function(){var e=this,t=function(e){return(q(e)||R(e))&&ee(e,(function(e,t){re(e,"options")&&q(e.options)&&(e.titleMap=e.options,delete e.options)}),"top-down"),e};R(this.layout)?this.jsf.layout=f.default(this.layout):R(this.form)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.layout=f.default(this.form)):this.form&&R(this.form.form)?(this.jsf.JsonFormCompatibility=!0,this.jsf.layout=t(f.default(this.form.form))):this.form&&R(this.form.layout)?this.jsf.layout=f.default(this.form.layout):this.jsf.layout=["*"];var r=null;q(this.UISchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=f.default(this.UISchema)):re(this.form,"UISchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=f.default(this.form.UISchema)):re(this.form,"uiSchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=f.default(this.form.uiSchema)):re(this.form,"customFormItems")&&(this.jsf.JsonFormCompatibility=!0,r=t(f.default(this.form.customFormItems))),r&&ce.forEachDeep(r,(function(t,r){var n=r.replace(/\//g,"/properties/").replace(/\/properties\/items\/properties\//g,"/items/properties/").replace(/\/properties\/titleMap\/properties\//g,"/titleMap/properties/");if(S(t)&&S(r)){var o=ce.toKey(r),i=(ce.parse(n)||[]).slice(0,-2),a=void 0;"ui:order"===o.toLowerCase()?a=C(i,["ui:order"]):("ui:"===o.slice(0,3).toLowerCase()&&(o=o.slice(3)),a=C(i,["x-schema-form",o])),ce.has(e.jsf.schema,i)&&!ce.has(e.jsf.schema,a)&&ce.set(e.jsf.schema,a,t)}}))},e.prototype.activateForm=function(){var e=this;if(V(this.jsf.schema)&&(V(this.jsf.formValues)||this.jsf.buildSchemaFromData()),V(this.jsf.schema)||(this.jsf.compileAjvSchema(),this.jsf.buildLayout(this.widgetLibrary),this.jsf.buildFormGroupTemplate(this.jsf.formValues),this.jsf.buildFormGroup()),this.jsf.formGroup){V(this.jsf.formValues)||!0===this.jsf.formOptions.setSchemaDefaults||!0===this.jsf.formOptions.setLayoutDefaults||this.setFormValues(this.jsf.formValues),this.jsf.dataChanges.subscribe((function(t){e.onChanges.emit(e.objectWrap?t[1]:t),e.formValuesInput&&-1===e.formValuesInput.indexOf(".")&&e[e.formValuesInput+"Change"].emit(e.objectWrap?t[1]:t)})),this.jsf.formGroup.statusChanges.subscribe((function(){return e.changeDetector.markForCheck()})),this.jsf.isValidChanges.subscribe((function(t){return e.isValid.emit(t)})),this.jsf.validationErrorChanges.subscribe((function(t){return e.validationErrors.emit(t)})),this.formSchema.emit(this.jsf.schema),this.formLayout.emit(this.jsf.layout),this.onChanges.emit(this.objectWrap?this.jsf.data[1]:this.jsf.data);var t=ce.get(this.jsf,"/formOptions/validateOnRender");if(t){var r=function(e){(!0===t||S(e.value))&&e.markAsTouched(),Object.keys(e.controls||{}).forEach((function(t){return r(e.controls[t])}))};r(this.jsf.formGroup),this.isValid.emit(this.jsf.isValid),this.validationErrors.emit(this.jsf.ajvErrors)}}},e}();bt.decorators=[{type:n.Component,args:[{selector:"json-schema-form",template:'<form [autocomplete]="jsf?.formOptions?.autocomplete ? \'on\' : \'off\'" class="json-schema-form" (ngSubmit)="submitForm()">\n  <root-widget [layout]="jsf?.layout"></root-widget>\n</form>\n<div *ngIf="debug || jsf?.formOptions?.debug">\n  Debug output:\n  <pre>{{debugOutput}}</pre>\n</div>',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],bt.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:gt},{type:vt},{type:Ke}]},bt.propDecorators={schema:[{type:n.Input}],layout:[{type:n.Input}],data:[{type:n.Input}],options:[{type:n.Input}],framework:[{type:n.Input}],widgets:[{type:n.Input}],form:[{type:n.Input}],model:[{type:n.Input}],JSONSchema:[{type:n.Input}],UISchema:[{type:n.Input}],formData:[{type:n.Input}],ngModel:[{type:n.Input}],language:[{type:n.Input}],loadExternalAssets:[{type:n.Input}],debug:[{type:n.Input}],value:[{type:n.Input}],onChanges:[{type:n.Output}],onSubmit:[{type:n.Output}],isValid:[{type:n.Output}],validationErrors:[{type:n.Output}],formSchema:[{type:n.Output}],formLayout:[{type:n.Output}],dataChange:[{type:n.Output}],modelChange:[{type:n.Output}],formDataChange:[{type:n.Output}],ngModelChange:[{type:n.Output}]};var xt=function(){};xt.decorators=[{type:n.Component,args:[{selector:"no-framework",template:'<select-widget-widget [dataIndex]="dataIndex" [layoutIndex]="layoutIndex" [layoutNode]="layoutNode">\n</select-widget-widget>'}]}],xt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var It=function(e){function t(){var t=e.apply(this,C(arguments))||this;return t.name="no-framework",t.framework=xt,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(de);It.decorators=[{type:n.Injectable}];var Ft=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.jsf.initializeControl(this)},e}();Ft.decorators=[{type:n.Component,args:[{selector:"hidden-widget",template:'\n    <input *ngIf="boundControl"\n      [formControl]="formControl"\n      [id]="\'control\' + layoutNode?._id"\n      [name]="controlName"\n      type="hidden">\n    <input *ngIf="!boundControl"\n      [disabled]="controlDisabled"\n      [name]="controlName"\n      [id]="\'control\' + layoutNode?._id"\n      type="hidden"\n      [value]="controlValue">'}]}],Ft.ctorParameters=function(){return[{type:Ke}]},Ft.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var jt=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},e}();jt.decorators=[{type:n.Component,args:[{selector:"tab-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <root-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layout]="layoutNode.items"></root-widget>\n    </div>'}]}],jt.ctorParameters=function(){return[{type:Ke}]},jt.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var Ct=function(){function e(e,t,r){this.elementRef=e,this.jsf=t,this.ngZone=r,this.overParentElement=!1,this.overChildElement=!1}return e.prototype.ngOnInit=function(){var e=this;this.orderable&&this.layoutNode&&this.layoutIndex&&this.dataIndex&&(this.element=this.elementRef.nativeElement,this.element.draggable=!0,this.arrayLayoutIndex="move:"+this.layoutIndex.slice(0,-1).toString(),this.ngZone.runOutsideAngular((function(){e.element.addEventListener("dragstart",(function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text","");var r=e.dataIndex[e.dataIndex.length-1];sessionStorage.setItem(e.arrayLayoutIndex,r+"")})),e.element.addEventListener("dragover",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),e.element.addEventListener("dragenter",(function(t){if(e.overParentElement)return e.overChildElement=!0;e.overParentElement=!0;var r=sessionStorage.getItem(e.arrayLayoutIndex);null!==r&&(e.dataIndex[e.dataIndex.length-1]<+r?e.element.classList.add("drag-target-top"):e.dataIndex[e.dataIndex.length-1]>+r&&e.element.classList.add("drag-target-bottom"))})),e.element.addEventListener("dragleave",(function(t){e.overChildElement?e.overChildElement=!1:e.overParentElement&&(e.overParentElement=!1);var r=sessionStorage.getItem(e.arrayLayoutIndex);e.overParentElement||e.overChildElement||null===r||(e.element.classList.remove("drag-target-top"),e.element.classList.remove("drag-target-bottom"))})),e.element.addEventListener("drop",(function(t){e.element.classList.remove("drag-target-top"),e.element.classList.remove("drag-target-bottom");var r=sessionStorage.getItem(e.arrayLayoutIndex),n=e.dataIndex[e.dataIndex.length-1];return null!==r&&+r!==n&&e.jsf.moveArrayItem(e,+r,n),sessionStorage.removeItem(e.arrayLayoutIndex),!1}))})))},e}();Ct.decorators=[{type:n.Directive,args:[{selector:"[orderable]"}]}],Ct.ctorParameters=function(){return[{type:n.ElementRef},{type:Ke},{type:n.NgZone}]},Ct.propDecorators={orderable:[{type:n.Input}],layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]};var wt=[Ye,at,Qe,Xe,et,tt,Ft,rt,nt,ot,it,st,lt,ut,dt,ct,pt,mt,jt,ft,ht,yt],Ot=function(){};Ot.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule],declarations:C(wt,[Ct]),exports:C(wt,[Ct]),entryComponents:C(wt)}]}];var Dt=function(){};Dt.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,Ot],declarations:[xt],exports:[xt],providers:[{provide:de,useClass:It,multi:!0}],entryComponents:[xt]}]}];var Pt=function(){};Pt.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule,Ot,Dt],declarations:[bt],exports:[bt,Ot]}]}],e.AddReferenceComponent=Ye,e.BASIC_WIDGETS=wt,e.ButtonComponent=Qe,e.CheckboxComponent=Xe,e.CheckboxesComponent=et,e.FileComponent=tt,e.Framework=de,e.FrameworkLibraryService=gt,e.HiddenComponent=Ft,e.InputComponent=rt,e.JsonPointer=ce,e.JsonSchemaFormComponent=bt,e.JsonSchemaFormModule=Pt,e.JsonSchemaFormService=Ke,e.JsonValidators=me,e.MessageComponent=nt,e.NoneComponent=ot,e.NumberComponent=it,e.OneOfComponent=at,e.OrderableDirective=Ct,e.RadiosComponent=st,e.RootComponent=lt,e.SectionComponent=ut,e.SelectComponent=dt,e.SelectFrameworkComponent=ct,e.SelectWidgetComponent=pt,e.SubmitComponent=mt,e.TabComponent=jt,e.TabsComponent=ft,e.TemplateComponent=ht,e.TextareaComponent=yt,e.WidgetLibraryModule=Ot,e.WidgetLibraryService=vt,e._executeAsyncValidators=P,e._executeValidators=D,e._mergeErrors=k,e._mergeObjects=M,e._toPromise=function(e){return U(e)?e:e.toPromise()},e.addClasses=function(e,t){var r=function(e){return!W(e)&&!R(e)&&!L(e)};if(r(t))return e;r(e)&&(e="");var n=function(e){return W(e)?e:R(e)?new Set(e):new Set(e.split(" "))},o=n(e);return n(t).forEach((function(e){return o.add(e)})),W(e)?o:R(e)?Array.from(o):Array.from(o).join(" ")},e.buildFormGroup=ke,e.buildFormGroupTemplate=Me,e.buildLayout=Le,e.buildLayoutFromSchema=Ee,e.buildSchemaFromData=ye,e.buildSchemaFromLayout=he,e.buildTitleMap=qe,e.checkInlineType=xe,e.combineAllOf=De,e.commonItems=se,e.convertSchemaToDraft6=O,e.copy=X,e.dateToString=function(e,t){void 0===t&&(t={});var r=t.dateFormat||"YYYY-MM-DD";if(!(e=new Date(e||void 0)).getDate())return null;var n=e.getFullYear().toString(),o=e.getMonth(),i=e.getDate(),a=e.getDay();return r.replace(/S/g,function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(i)).replace(/YYYY/g,n).replace(/YY/g,n.slice(-2)).replace(/MMMM/g,Re[o]).replace(/MMM/g,ze[o]).replace(/MM/g,("0"+(o+1)).slice(-2)).replace(/M/g,o+1).replace(/DDDD/g,$e[a]).replace(/DDD/g,We[a]).replace(/DD/g,("0"+i).slice(-2)).replace(/D/g,i)},e.deValidationMessages=_e,e.enValidationMessages=Je,e.esValidationMessages=Be,e.fixRequiredArrayProperties=Pe,e.fixTitle=le,e.forEach=ee,e.forEachCopy=te,e.formatFormData=Se,e.frValidationMessages=He,e.getControl=Ve,e.getControlValidators=Ce,e.getFromSchema=ve,e.getInputType=be,e.getLayoutNode=Te,e.getSubSchema=Oe,e.getTitleMapFromOneOf=je,e.getType=_,e.hasOwn=re,e.hasValue=S,e.inArray=Y,e.isArray=R,e.isBoolean=T,e.isDate=$,e.isDefined=N,e.isEmpty=V,e.isFunction=function(e){return"function"==typeof e},e.isInputRequired=Ie,e.isInteger=A,e.isMap=z,e.isNumber=E,e.isObject=q,e.isObservable=Z,e.isPrimitive=B,e.isPromise=U,e.isSet=W,e.isString=L,e.isType=J,e.itValidationMessages=Ge,e.mapLayout=Ae,e.mergeFilteredObject=ie,e.mergeSchemas=fe,e.ptValidationMessages=Ue,e.removeRecursiveReferences=ge,e.resolveSchemaReferences=we,e.setRequiredFields=Ne,e.toJavaScriptType=H,e.toObservable=K,e.toSchemaType=G,e.toTitleCase=ue,e.uniqueItems=ae,e.updateInputOptions=Fe,e.xor=Q,e.zhValidationMessages=Ze,e.a=wt,e.b=Ye,e.ba=xt,e.bb=It,e.c=at,e.d=Qe,e.e=Xe,e.f=et,e.g=tt,e.h=Ft,e.i=rt,e.j=nt,e.k=ot,e.l=it,e.m=Ct,e.n=st,e.o=lt,e.p=ut,e.q=dt,e.r=ct,e.s=pt,e.t=mt,e.u=jt,e.v=ft,e.w=ht,e.x=yt,e.y=vt,e.z=Dt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ajsf-core.umd.min.js.map