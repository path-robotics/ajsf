!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ajsf/core"),require("lodash/cloneDeep"),require("lodash/map"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ajsf/bootstrap3",["exports","@angular/core","@ajsf/core","lodash/cloneDeep","lodash/map","@angular/common"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).ajsf=t.ajsf||{},t.ajsf.bootstrap3={}),t.ng.core,t["@ajsf/core"],t["lodash-es"],t["lodash-es"],t.ng.common)}(this,(function(t,e,s,o,i,n){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(o),r=a(i),d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)};Object.create;function p(t,e){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var o,i,n=s.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}Object.create;var c=function(){function t(t,e){this.changeDetector=t,this.jsf=e,this.frameworkInitialized=!1,this.formControl=null,this.debugOutput="",this.debug="",this.parentArray=null,this.isOrderable=!1}return Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return!(!this.options.removable||this.options.readonly||"$ref"===this.layoutNode.type)&&(!!this.layoutNode.recursiveReference||!(!this.layoutNode.arrayItem||!this.parentArray)&&(!(this.parentArray.items.length-1<=this.parentArray.options.minItems)&&("list"===this.layoutNode.arrayItemType||this.layoutIndex[this.layoutIndex.length-1]===this.parentArray.items.length-2)))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.initializeFramework(),this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type&&(this.parentArray=this.jsf.getParentNode(this),this.parentArray&&(this.isOrderable="list"===this.layoutNode.arrayItemType&&!this.options.readonly&&this.parentArray.options.orderable))},t.prototype.ngOnChanges=function(){this.frameworkInitialized||this.initializeFramework()},t.prototype.initializeFramework=function(){var t=this;if(this.layoutNode){switch(this.options=l.default(this.layoutNode.options),this.widgetLayoutNode=Object.assign(Object.assign({},this.layoutNode),{options:l.default(this.layoutNode.options)}),this.widgetOptions=this.widgetLayoutNode.options,this.formControl=this.jsf.getFormControl(this),this.options.isInputWidget=s.inArray(this.layoutNode.type,["button","checkbox","checkboxes-inline","checkboxes","color","date","datetime-local","datetime","email","file","hidden","image","integer","month","number","password","radio","radiobuttons","radios-inline","radios","range","reset","search","select","submit","tel","text","textarea","time","url","week"]),this.options.title=this.setTitle(),this.options.htmlClass=s.addClasses(this.options.htmlClass,"schema-form-"+this.layoutNode.type),"flex"!==this.layoutNode.type&&(this.options.htmlClass="array"===this.layoutNode.type?s.addClasses(this.options.htmlClass,"list-group"):this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type?s.addClasses(this.options.htmlClass,"list-group-item"):s.addClasses(this.options.htmlClass,"form-group")),this.widgetOptions.htmlClass="",this.options.labelHtmlClass=s.addClasses(this.options.labelHtmlClass,"control-label"),this.widgetOptions.activeClass=s.addClasses(this.widgetOptions.activeClass,"active"),this.options.fieldAddonLeft=this.options.fieldAddonLeft||this.options.prepend,this.options.fieldAddonRight=this.options.fieldAddonRight||this.options.append,this.options.title&&"tab"!==this.layoutNode.type&&!this.options.notitle&&this.options.required&&!this.options.title.includes("*")&&(this.options.title+=' <strong class="text-danger">*</strong>'),this.layoutNode.type){case"checkbox":case"checkboxes":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"checkbox");break;case"checkboxes-inline":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"checkbox"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"checkbox-inline");break;case"radio":case"radios":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"radio");break;case"radios-inline":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"radio"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"radio-inline");break;case"checkboxbuttons":case"radiobuttons":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"btn-group"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"btn"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,this.options.style||"btn-default"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"sr-only");break;case"button":case"submit":this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"btn"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-info");break;case"array":case"fieldset":case"section":case"conditional":case"advancedfieldset":case"authfieldset":case"selectfieldset":case"optionfieldset":this.options.messageLocation="top";break;case"tabarray":case"tabs":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"tab-content"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"tab-pane"),this.widgetOptions.labelHtmlClass=s.addClasses(this.widgetOptions.labelHtmlClass,"nav nav-tabs");break;case"$ref":this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"btn pull-right"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-default"),this.options.icon="glyphicon glyphicon-plus";break;default:this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"form-control")}if(this.formControl&&(this.updateHelpBlock(this.formControl.status),this.formControl.statusChanges.subscribe((function(e){return t.updateHelpBlock(e)})),this.options.debug)){this.debugOutput=r.default([],(function(t){return JSON.stringify(t,null,2)})).join("\n")}this.frameworkInitialized=!0}},t.prototype.updateHelpBlock=function(t){this.options.helpBlock="INVALID"===t&&this.options.enableErrorState&&this.formControl.errors&&(this.formControl.dirty||this.options.feedbackOnRender)?this.jsf.formatErrors(this.formControl.errors,this.options.validationMessages):this.options.description||this.options.help||null},t.prototype.setTitle=function(){switch(this.layoutNode.type){case"button":case"checkbox":case"section":case"help":case"msg":case"submit":case"message":case"tabarray":case"tabs":case"$ref":return null;case"advancedfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Advanced options",null;case"authfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Authentication settings",null;case"fieldset":return this.widgetOptions.title=this.options.title,null;default:return this.widgetOptions.title=null,this.jsf.setItemTitle(this)}},t.prototype.removeItem=function(){this.jsf.removeItem(this)},t}();c.decorators=[{type:e.Component,args:[{selector:"bootstrap-3-framework",template:'<div\n  [class]="options?.htmlClass || \'\'"\n  [class.has-feedback]="options?.feedback && options?.isInputWidget &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n  [class.has-error]="options?.enableErrorState && formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n  [class.has-success]="options?.enableSuccessState && !formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)">\n\n  <button *ngIf="showRemoveButton"\n          class="close pull-right"\n          type="button"\n          (click)="removeItem()">\n    <span aria-hidden="true">&times;</span>\n    <span class="sr-only">Close</span>\n  </button>\n  <div *ngIf="options?.messageLocation === \'top\'">\n    <p *ngIf="options?.helpBlock"\n       class="help-block"\n       [innerHTML]="options?.helpBlock"></p>\n  </div>\n\n  <label *ngIf="options?.title && layoutNode?.type !== \'tab\'"\n         [attr.for]="\'control\' + layoutNode?._id"\n         [class]="options?.labelHtmlClass || \'\'"\n         [class.sr-only]="options?.notitle"\n         [innerHTML]="options?.title"></label>\n  <p *ngIf="layoutNode?.type === \'submit\' && jsf?.formOptions?.fieldsRequired">\n    <strong class="text-danger">*</strong> = required fields\n  </p>\n  <div [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight">\n        <span *ngIf="options?.fieldAddonLeft"\n              class="input-group-addon"\n              [innerHTML]="options?.fieldAddonLeft"></span>\n\n    <select-widget-widget\n      [layoutNode]="widgetLayoutNode"\n      [dataIndex]="dataIndex"\n      [layoutIndex]="layoutIndex"></select-widget-widget>\n\n    <span *ngIf="options?.fieldAddonRight"\n          class="input-group-addon"\n          [innerHTML]="options?.fieldAddonRight"></span>\n  </div>\n\n  <span *ngIf="options?.feedback && options?.isInputWidget &&\n          !options?.fieldAddonRight && !layoutNode.arrayItem &&\n          (formControl?.dirty || options?.feedbackOnRender)"\n        [class.glyphicon-ok]="options?.enableSuccessState && !formControl?.errors"\n        [class.glyphicon-remove]="options?.enableErrorState && formControl?.errors"\n        aria-hidden="true"\n        class="form-control-feedback glyphicon"></span>\n  <div *ngIf="options?.messageLocation !== \'top\'">\n    <p *ngIf="options?.helpBlock"\n       class="help-block"\n       [innerHTML]="options?.helpBlock"></p>\n  </div>\n</div>\n\n<div *ngIf="debug && debugOutput">debug:\n  <pre>{{debugOutput}}</pre>\n</div>\n',styles:[":host ::ng-deep .list-group-item .form-control-feedback{top:40px}:host ::ng-deep .checkbox,:host ::ng-deep .radio{margin-bottom:0;margin-top:0}:host ::ng-deep .checkbox-inline,:host ::ng-deep .checkbox-inline+.checkbox-inline,:host ::ng-deep .checkbox-inline+.radio-inline,:host ::ng-deep .radio-inline,:host ::ng-deep .radio-inline+.checkbox-inline,:host ::ng-deep .radio-inline+.radio-inline{margin-left:0;margin-right:10px}:host ::ng-deep .checkbox-inline:last-child,:host ::ng-deep .radio-inline:last-child{margin-right:0}:host ::ng-deep .ng-invalid.ng-touched{border:1px solid #f44336}"]}]}],c.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:s.JsonSchemaFormService}]},c.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]};var u=function(t){function e(){var e=t.apply(this,h(arguments))||this;return e.name="bootstrap-3",e.framework=c,e.stylesheets=["//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css","//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"],e.scripts=["//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js","//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js","//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"],e}return function(t,e){function s(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}(e,t),e}(s.Framework);u.decorators=[{type:e.Injectable}];var m=function(){};m.decorators=[{type:e.NgModule,args:[{imports:[s.JsonSchemaFormModule,n.CommonModule,s.WidgetLibraryModule],declarations:[c],exports:[s.JsonSchemaFormModule,c],providers:[s.JsonSchemaFormService,s.FrameworkLibraryService,s.WidgetLibraryService,{provide:s.Framework,useClass:u,multi:!0}],entryComponents:[c]}]}],t.Bootstrap3Framework=u,t.Bootstrap3FrameworkComponent=c,t.Bootstrap3FrameworkModule=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ajsf-bootstrap3.umd.min.js.map